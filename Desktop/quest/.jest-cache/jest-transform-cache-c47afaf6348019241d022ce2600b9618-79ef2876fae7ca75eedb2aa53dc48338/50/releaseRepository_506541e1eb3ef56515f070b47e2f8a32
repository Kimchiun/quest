3a23042ce495d512d1bd54b8d10d0d21
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.releaseRepository = exports.ReleaseRepository = void 0;
class ReleaseRepository {
    // 모든 릴리즈 조회
    async findAll() {
        try {
            const { getPgClient } = await Promise.resolve().then(() => __importStar(require('../../../infrastructure/database/pgClient')));
            const pgClient = getPgClient();
            if (!pgClient) {
                throw new Error('PostgreSQL 클라이언트가 초기화되지 않았습니다.');
            }
            const result = await pgClient.query(`
        SELECT 
          id,
          name,
          version,
          description,
          status,
          assignee_name,
          scheduled_date,
          deployed_date,
          created_at,
          updated_at
        FROM releases
        ORDER BY created_at DESC
      `);
            return result.rows.map((row) => ({
                id: row.id,
                projectId: '1',
                name: row.name,
                version: row.version,
                description: row.description || '',
                status: row.status,
                startAt: row.scheduled_date,
                endAt: row.deployed_date,
                owners: row.assignee_name ? [row.assignee_name] : [],
                assignee_name: row.assignee_name,
                watchers: [],
                tags: [],
                createdBy: 'system',
                updatedBy: 'system',
                createdAt: row.created_at,
                updatedAt: row.updated_at,
                settings: {
                    gateCriteria: {
                        minPassRate: 85,
                        maxFailCritical: 0,
                        zeroBlockers: true,
                        coverageByPriority: {
                            P0: 100,
                            P1: 95,
                            P2: 90
                        }
                    },
                    autoSyncScope: true,
                    allowReopen: false
                }
            }));
        }
        catch (error) {
            console.error('릴리즈 조회 실패:', error);
            return []; // 실패 시 빈 배열 반환
        }
    }
    // ID로 릴리즈 조회
    async findById(id) {
        try {
            const { getPgClient } = await Promise.resolve().then(() => __importStar(require('../../../infrastructure/database/pgClient')));
            const pgClient = getPgClient();
            if (!pgClient) {
                throw new Error('PostgreSQL 클라이언트가 초기화되지 않았습니다.');
            }
            const result = await pgClient.query(`
        SELECT 
          id,
          name,
          version,
          description,
          status,
          assignee_name,
          scheduled_date,
          deployed_date,
          created_at,
          updated_at
        FROM releases
        WHERE id = $1
      `, [id]);
            if (result.rows.length === 0) {
                return null;
            }
            const row = result.rows[0];
            return {
                id: String(row.id),
                projectId: '1',
                name: row.name,
                version: row.version,
                description: row.description || '',
                status: row.status,
                startAt: row.scheduled_date,
                endAt: row.deployed_date,
                owners: row.assignee_name ? [row.assignee_name] : [],
                assignee_name: row.assignee_name,
                watchers: [],
                tags: [],
                createdBy: 'system',
                updatedBy: 'system',
                createdAt: row.created_at,
                updatedAt: row.updated_at,
                settings: {
                    gateCriteria: {
                        minPassRate: 85,
                        maxFailCritical: 0,
                        zeroBlockers: true,
                        coverageByPriority: {
                            P0: 100,
                            P1: 95,
                            P2: 90
                        }
                    },
                    autoSyncScope: true,
                    allowReopen: false
                }
            };
        }
        catch (error) {
            console.error('릴리즈 조회 실패:', error);
            return null;
        }
    }
    // 프로젝트별 릴리즈 조회
    async findByProjectId(projectId) {
        try {
            const { getPgClient } = await Promise.resolve().then(() => __importStar(require('../../../infrastructure/database/pgClient')));
            const pgClient = getPgClient();
            if (!pgClient) {
                throw new Error('PostgreSQL 클라이언트가 초기화되지 않았습니다.');
            }
            const result = await pgClient.query(`
        SELECT 
          id,
          name,
          version,
          description,
          status,
          assignee_name,
          scheduled_date,
          deployed_date,
          created_at,
          updated_at
        FROM releases
        ORDER BY created_at DESC
      `);
            return result.rows.map((row) => ({
                id: row.id,
                projectId: '1',
                name: row.name,
                version: row.version,
                description: row.description || '',
                status: row.status,
                startAt: row.scheduled_date,
                endAt: row.deployed_date,
                owners: row.assignee_name ? [row.assignee_name] : [],
                assignee_name: row.assignee_name,
                watchers: [],
                tags: [],
                createdBy: 'system',
                updatedBy: 'system',
                createdAt: row.created_at,
                updatedAt: row.updated_at,
                settings: {
                    gateCriteria: {
                        minPassRate: 85,
                        maxFailCritical: 0,
                        zeroBlockers: true,
                        coverageByPriority: {
                            P0: 100,
                            P1: 95,
                            P2: 90
                        }
                    },
                    autoSyncScope: true,
                    allowReopen: false
                }
            }));
        }
        catch (error) {
            console.error('프로젝트별 릴리즈 조회 실패:', error);
            return [];
        }
    }
    // 릴리즈 생성
    async create(releaseData) {
        try {
            const { getPgClient } = await Promise.resolve().then(() => __importStar(require('../../../infrastructure/database/pgClient')));
            const pgClient = getPgClient();
            if (!pgClient) {
                throw new Error('PostgreSQL 클라이언트가 초기화되지 않았습니다.');
            }
            const now = new Date().toISOString();
            const result = await pgClient.query(`
        INSERT INTO releases (
          name, version, description, status, assignee_name, 
          scheduled_date, deployed_date, created_at, updated_at
        ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)
        RETURNING *
      `, [
                releaseData.name,
                releaseData.version,
                releaseData.description || '',
                releaseData.status,
                releaseData.assignee || releaseData.owners?.[0] || null,
                releaseData.startAt || null,
                releaseData.endAt || null,
                now,
                now
            ]);
            const createdRelease = result.rows[0];
            return {
                id: createdRelease.id,
                projectId: '1',
                name: createdRelease.name,
                version: createdRelease.version,
                description: createdRelease.description || '',
                status: createdRelease.status,
                startAt: createdRelease.scheduled_date,
                endAt: createdRelease.deployed_date,
                owners: createdRelease.assignee_name ? [createdRelease.assignee_name] : [],
                assignee_name: createdRelease.assignee_name,
                watchers: [],
                tags: [],
                createdBy: 'system',
                updatedBy: 'system',
                createdAt: createdRelease.created_at,
                updatedAt: createdRelease.updated_at,
                settings: {
                    gateCriteria: {
                        minPassRate: 85,
                        maxFailCritical: 0,
                        zeroBlockers: true,
                        coverageByPriority: {
                            P0: 100,
                            P1: 95,
                            P2: 90
                        }
                    },
                    autoSyncScope: true,
                    allowReopen: false
                }
            };
        }
        catch (error) {
            console.error('릴리즈 생성 실패:', error);
            throw error;
        }
    }
    // 릴리즈 업데이트
    async update(id, updateData) {
        try {
            const { getPgClient } = await Promise.resolve().then(() => __importStar(require('../../../infrastructure/database/pgClient')));
            const pgClient = getPgClient();
            if (!pgClient) {
                throw new Error('PostgreSQL 클라이언트가 초기화되지 않았습니다.');
            }
            const now = new Date().toISOString();
            const result = await pgClient.query(`
        UPDATE releases 
        SET 
          name = COALESCE($1, name),
          version = COALESCE($2, version),
          description = COALESCE($3, description),
          status = COALESCE($4, status),
          assignee_name = COALESCE($5, assignee_name),
          scheduled_date = COALESCE($6, scheduled_date),
          deployed_date = COALESCE($7, deployed_date),
          updated_at = $8
        WHERE id = $9
        RETURNING *
      `, [
                updateData.name,
                updateData.version,
                updateData.description,
                updateData.status,
                updateData.owners?.[0] || null,
                updateData.startAt,
                updateData.endAt,
                now,
                id
            ]);
            if (result.rows.length === 0) {
                return null;
            }
            const updatedRelease = result.rows[0];
            return {
                id: updatedRelease.id,
                projectId: '1',
                name: updatedRelease.name,
                version: updatedRelease.version,
                description: updatedRelease.description || '',
                status: updatedRelease.status,
                startAt: updatedRelease.scheduled_date,
                endAt: updatedRelease.deployed_date,
                owners: updatedRelease.assignee_name ? [updatedRelease.assignee_name] : [],
                watchers: [],
                tags: [],
                createdBy: 'system',
                updatedBy: 'system',
                createdAt: updatedRelease.created_at,
                updatedAt: updatedRelease.updated_at,
                settings: {
                    gateCriteria: {
                        minPassRate: 85,
                        maxFailCritical: 0,
                        zeroBlockers: true,
                        coverageByPriority: {
                            P0: 100,
                            P1: 95,
                            P2: 90
                        }
                    },
                    autoSyncScope: true,
                    allowReopen: false
                }
            };
        }
        catch (error) {
            console.error('릴리즈 업데이트 실패:', error);
            throw error;
        }
    }
    // 릴리즈 삭제 (메모리 배열 기반 - deprecated)
    async delete(id) {
        try {
            await this.deleteRelease(id);
            return true;
        }
        catch (error) {
            console.error('릴리즈 삭제 실패:', error);
            return false;
        }
    }
    // 상태별 릴리즈 조회
    async findByStatus(status) {
        try {
            const { getPgClient } = await Promise.resolve().then(() => __importStar(require('../../../infrastructure/database/pgClient')));
            const pgClient = getPgClient();
            if (!pgClient) {
                throw new Error('PostgreSQL 클라이언트가 초기화되지 않았습니다.');
            }
            const result = await pgClient.query(`
        SELECT 
          id,
          name,
          version,
          description,
          status,
          assignee_name,
          scheduled_date,
          deployed_date,
          created_at,
          updated_at
        FROM releases
        WHERE status = $1
        ORDER BY created_at DESC
      `, [status]);
            return result.rows.map((row) => ({
                id: row.id,
                projectId: '1',
                name: row.name,
                version: row.version,
                description: row.description || '',
                status: row.status,
                startAt: row.scheduled_date,
                endAt: row.deployed_date,
                owners: row.assignee_name ? [row.assignee_name] : [],
                assignee_name: row.assignee_name,
                watchers: [],
                tags: [],
                createdBy: 'system',
                updatedBy: 'system',
                createdAt: row.created_at,
                updatedAt: row.updated_at,
                settings: {
                    gateCriteria: {
                        minPassRate: 85,
                        maxFailCritical: 0,
                        zeroBlockers: true,
                        coverageByPriority: {
                            P0: 100,
                            P1: 95,
                            P2: 90
                        }
                    },
                    autoSyncScope: true,
                    allowReopen: false
                }
            }));
        }
        catch (error) {
            console.error('상태별 릴리즈 조회 실패:', error);
            return [];
        }
    }
    // 검색어로 릴리즈 조회
    async search(query) {
        try {
            const { getPgClient } = await Promise.resolve().then(() => __importStar(require('../../../infrastructure/database/pgClient')));
            const pgClient = getPgClient();
            if (!pgClient) {
                throw new Error('PostgreSQL 클라이언트가 초기화되지 않았습니다.');
            }
            const searchPattern = `%${query}%`;
            const result = await pgClient.query(`
        SELECT 
          id,
          name,
          version,
          description,
          status,
          assignee_name,
          scheduled_date,
          deployed_date,
          created_at,
          updated_at
        FROM releases
        WHERE 
          name ILIKE $1 OR 
          description ILIKE $1 OR 
          version ILIKE $1
        ORDER BY created_at DESC
      `, [searchPattern]);
            return result.rows.map((row) => ({
                id: row.id,
                projectId: '1',
                name: row.name,
                version: row.version,
                description: row.description || '',
                status: row.status,
                startAt: row.scheduled_date,
                endAt: row.deployed_date,
                owners: row.assignee_name ? [row.assignee_name] : [],
                assignee_name: row.assignee_name,
                watchers: [],
                tags: [],
                createdBy: 'system',
                updatedBy: 'system',
                createdAt: row.created_at,
                updatedAt: row.updated_at,
                settings: {
                    gateCriteria: {
                        minPassRate: 85,
                        maxFailCritical: 0,
                        zeroBlockers: true,
                        coverageByPriority: {
                            P0: 100,
                            P1: 95,
                            P2: 90
                        }
                    },
                    autoSyncScope: true,
                    allowReopen: false
                }
            }));
        }
        catch (error) {
            console.error('릴리즈 검색 실패:', error);
            return [];
        }
    }
    // 릴리즈 스코프 업데이트
    async updateScope(releaseId, scope) {
        const release = await this.findById(releaseId);
        if (!release)
            return null;
        // 실제로는 ReleaseScope 엔티티를 업데이트하는 로직이 필요
        return this.update(releaseId, { updatedAt: new Date().toISOString() });
    }
    // 릴리즈 케이스 추가
    async addCase(releaseId, releaseCase) {
        const release = await this.findById(releaseId);
        if (!release)
            return null;
        // 실제로는 ReleaseCase를 추가하는 로직이 필요
        return this.update(releaseId, { updatedAt: new Date().toISOString() });
    }
    // 릴리즈 케이스 업데이트
    async updateCase(releaseId, caseId, updates) {
        const release = await this.findById(releaseId);
        if (!release)
            return null;
        // 실제로는 ReleaseCase를 업데이트하는 로직이 필요
        return this.update(releaseId, { updatedAt: new Date().toISOString() });
    }
    // 실행 결과 저장
    async saveRun(releaseId, run) {
        const release = await this.findById(releaseId);
        if (!release)
            return null;
        // 실제로는 Run을 저장하는 로직이 필요
        return this.update(releaseId, { updatedAt: new Date().toISOString() });
    }
    // 결함 링크 추가
    async addDefectLink(releaseId, defectLink) {
        const release = await this.findById(releaseId);
        if (!release)
            return null;
        // 실제로는 DefectLink를 추가하는 로직이 필요
        return this.update(releaseId, { updatedAt: new Date().toISOString() });
    }
    // 환경 정보 업데이트
    async updateEnvironment(releaseId, environment) {
        const release = await this.findById(releaseId);
        if (!release)
            return null;
        // 실제로는 Environment를 업데이트하는 로직이 필요
        return this.update(releaseId, { updatedAt: new Date().toISOString() });
    }
    // 게이트 기준 업데이트
    async updateGateCriteria(releaseId, gateCriteria) {
        const release = await this.findById(releaseId);
        if (!release)
            return null;
        return this.update(releaseId, {
            settings: {
                ...release.settings,
                gateCriteria
            }
        });
    }
    // 릴리즈 테스트 케이스 조회
    async getTestCases(releaseId) {
        try {
            const { getPgClient } = await Promise.resolve().then(() => __importStar(require('../../../infrastructure/database/pgClient')));
            const pgClient = getPgClient();
            if (!pgClient) {
                throw new Error('PostgreSQL 클라이언트가 초기화되지 않았습니다.');
            }
            // release_test_cases 테이블과 testcases 테이블을 조인하여 모든 상세 정보 조회
            const result = await pgClient.query(`
        SELECT 
          tc.id,
          tc.title,
          tc.prereq as description,
          tc.steps,
          tc.expected,
          tc.priority,
          tc.status,
          tc.created_by,
          tc.created_at,
          tc.updated_at,
          rtc.status as execution_status,
          rtc.assignee_name as assigned_to,
          rtc.executed_at,
          tc.folder_id
        FROM testcases tc
        INNER JOIN release_test_cases rtc ON tc.id = rtc.test_case_id
        WHERE rtc.release_id = $1
        ORDER BY tc.id
      `, [releaseId]);
            return result.rows.map((row) => ({
                id: row.id,
                title: row.title,
                description: row.description || '',
                steps: row.steps || '',
                expected: row.expected || '',
                priority: row.priority,
                status: row.status,
                createdBy: row.created_by,
                createdAt: row.created_at,
                updatedAt: row.updated_at,
                executionStatus: row.execution_status,
                assignedTo: row.assigned_to,
                executedAt: row.executed_at,
                executedBy: '', // executed_by 컬럼이 없으므로 빈 문자열로 설정
                folderId: row.folder_id
            }));
        }
        catch (error) {
            console.error('릴리즈 테스트 케이스 조회 실패:', error);
            // 에러 발생 시 빈 배열 반환
            return [];
        }
    }
    // 릴리즈 테스트케이스 삭제
    async deleteTestCases(releaseId) {
        try {
            const { getPgClient } = await Promise.resolve().then(() => __importStar(require('../../../infrastructure/database/pgClient')));
            const pgClient = getPgClient();
            if (!pgClient) {
                throw new Error('PostgreSQL 클라이언트가 초기화되지 않았습니다.');
            }
            // 릴리즈에 연결된 모든 테스트케이스 삭제
            await pgClient.query(`
        DELETE FROM release_test_cases
        WHERE release_id = $1
      `, [releaseId]);
            console.log(`릴리즈 ${releaseId}의 모든 테스트케이스가 삭제되었습니다.`);
        }
        catch (error) {
            console.error('릴리즈 테스트케이스 삭제 실패:', error);
            throw error;
        }
    }
    // 특정 테스트케이스들 삭제
    async deleteSpecificTestCases(releaseId, testCaseIds) {
        try {
            const { getPgClient } = await Promise.resolve().then(() => __importStar(require('../../../infrastructure/database/pgClient')));
            const pgClient = getPgClient();
            if (!pgClient) {
                throw new Error('PostgreSQL 클라이언트가 초기화되지 않았습니다.');
            }
            if (testCaseIds.length === 0) {
                return;
            }
            // 릴리즈에서 특정 테스트케이스들 삭제
            // testCaseIds를 정수 배열로 변환
            const testCaseIdsAsIntegers = testCaseIds.map(id => parseInt(id, 10));
            await pgClient.query(`
        DELETE FROM release_test_cases
        WHERE release_id = $1 AND test_case_id = ANY($2::integer[])
      `, [releaseId, testCaseIdsAsIntegers]);
            console.log(`릴리즈 ${releaseId}에서 ${testCaseIds.length}개의 테스트케이스가 삭제되었습니다.`);
        }
        catch (error) {
            console.error('특정 테스트케이스 삭제 실패:', error);
            throw error;
        }
    }
    // 테스트케이스 상태 변경
    async updateTestCaseStatus(releaseId, testCaseId, status, comment) {
        try {
            const { getPgClient } = await Promise.resolve().then(() => __importStar(require('../../../infrastructure/database/pgClient')));
            const pgClient = getPgClient();
            if (!pgClient) {
                throw new Error('PostgreSQL 클라이언트가 초기화되지 않았습니다.');
            }
            console.log('=== updateTestCaseStatus called ===');
            console.log('Parameters:', { releaseId, testCaseId, status, comment });
            console.log('Status received (already mapped):', status);
            // release_test_cases 테이블에서 상태 업데이트
            const updateQuery = `
        UPDATE release_test_cases
        SET status = $1, updated_at = CURRENT_TIMESTAMP
        WHERE release_id = $2 AND test_case_id = $3
        RETURNING *
      `;
            console.log('Update query:', updateQuery);
            console.log('Update parameters:', [status, releaseId, testCaseId]);
            const result = await pgClient.query(updateQuery, [status, releaseId, testCaseId]);
            if (result.rows.length === 0) {
                throw new Error('테스트케이스를 찾을 수 없습니다.');
            }
            console.log('Update result:', result.rows[0]);
            // 실행 기록 추가 (executions 테이블) - 안전한 upsert 처리
            try {
                // 먼저 INSERT 시도
                const insertQuery = `
          INSERT INTO executions (
            release_id, testcase_id, status, executed_by, executed_at, comments, created_at, updated_at
          ) VALUES ($1, $2, $3, $4, CURRENT_TIMESTAMP, $5, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)
        `;
                await pgClient.query(insertQuery, [releaseId, testCaseId, status, 'system', comment || '']);
                console.log(`새로운 실행 기록 생성: release_id=${releaseId}, testcase_id=${testCaseId}`);
            }
            catch (insertError) {
                // UNIQUE 제약 조건 위반인 경우 UPDATE 수행
                if (insertError.code === '23505') { // unique_violation
                    const updateQuery = `
            UPDATE executions 
            SET 
              status = $1,
              executed_by = $2,
              executed_at = CURRENT_TIMESTAMP,
              comments = $3,
              updated_at = CURRENT_TIMESTAMP
            WHERE release_id = $4 AND testcase_id = $5
          `;
                    await pgClient.query(updateQuery, [status, 'system', comment || '', releaseId, testCaseId]);
                    console.log(`기존 실행 기록 업데이트: release_id=${releaseId}, testcase_id=${testCaseId}`);
                }
                else {
                    throw insertError;
                }
            }
            console.log(`=== 테스트케이스 ${testCaseId} 상태가 ${status}로 변경되었습니다. ===`);
            return result.rows[0];
        }
        catch (error) {
            console.error('=== 테스트케이스 상태 변경 실패 ===');
            console.error('Error details:', error);
            throw error;
        }
    }
    // 테스트 폴더 조회
    async getTestFolders() {
        try {
            const { getPgClient } = await Promise.resolve().then(() => __importStar(require('../../../infrastructure/database/pgClient')));
            const pgClient = getPgClient();
            if (!pgClient) {
                throw new Error('PostgreSQL 클라이언트가 초기화되지 않았습니다.');
            }
            // folders 테이블과 tree_nodes 테이블에서 폴더 구조를 가져오는 쿼리 (중복 제거)
            const result = await pgClient.query(`
        WITH RECURSIVE folders_tree AS (
          -- folders 테이블의 루트 폴더들
          SELECT 
            id,
            name,
            description,
            parent_id,
            created_by,
            created_at,
            updated_at,
            0 as depth,
            ARRAY[id] as path,
            'folders' as source_table
          FROM folders 
          WHERE parent_id IS NULL
          
          UNION ALL
          
          -- folders 테이블의 하위 폴더들
          SELECT 
            f.id,
            f.name,
            f.description,
            f.parent_id,
            f.created_by,
            f.created_at,
            f.updated_at,
            ft.depth + 1,
            ft.path || f.id,
            'folders' as source_table
          FROM folders f
          INNER JOIN folders_tree ft ON f.parent_id = ft.id
        ),
        tree_nodes_tree AS (
          -- tree_nodes 테이블의 루트 폴더들
          SELECT 
            id,
            name,
            '' as description,
            parent_id,
            created_by,
            created_at,
            updated_at,
            0 as depth,
            ARRAY[id] as path,
            'tree_nodes' as source_table
          FROM tree_nodes 
          WHERE type = 'folder' AND parent_id IS NULL
          
          UNION ALL
          
          -- tree_nodes 테이블의 하위 폴더들
          SELECT 
            tn.id,
            tn.name,
            '' as description,
            tn.parent_id,
            tn.created_by,
            tn.created_at,
            tn.updated_at,
            tnt.depth + 1,
            tnt.path || tn.id,
            'tree_nodes' as source_table
          FROM tree_nodes tn
          INNER JOIN tree_nodes_tree tnt ON tn.parent_id = tnt.id
          WHERE tn.type = 'folder'
        ),
        combined_folders AS (
          -- tree_nodes 테이블의 폴더들을 우선시하고, 중복되지 않는 folders 테이블의 폴더들 추가
          SELECT * FROM tree_nodes_tree
          UNION ALL
          SELECT * FROM folders_tree ft
          WHERE NOT EXISTS (
            SELECT 1 FROM tree_nodes_tree tnt WHERE tnt.id = ft.id
          )
        )
        SELECT
          id,
          name,
          description,
          parent_id,
          created_by,
          created_at,
          updated_at,
          depth,
          path,
          source_table
        FROM combined_folders
        ORDER BY path
      `);
            const folders = result.rows;
            // 각 폴더에 대해 테스트케이스 개수 계산
            for (const folder of folders) {
                if (folder.source_table === 'folders') {
                    // folders 테이블의 폴더인 경우 - 해당 폴더의 직접적인 테스트케이스만 계산
                    const testCaseCountResult = await pgClient.query(`
            SELECT COUNT(*) as count
            FROM testcases 
            WHERE folder_id = $1
          `, [folder.id]);
                    folder.testCaseCount = parseInt(testCaseCountResult.rows[0]?.count || '0');
                }
                else {
                    // tree_nodes 테이블의 폴더인 경우 - 해당 폴더의 직접적인 테스트케이스만 계산
                    const testCaseCountResult = await pgClient.query(`
            SELECT 
              (SELECT COUNT(*) FROM tree_nodes WHERE type = 'testcase' AND parent_id = $1) +
              (SELECT COUNT(*) FROM testcases WHERE folder_id = $1) as count
          `, [folder.id]);
                    folder.testCaseCount = parseInt(testCaseCountResult.rows[0]?.count || '0');
                }
            }
            return folders;
        }
        catch (error) {
            console.error('테스트 폴더 조회 실패:', error);
            throw error;
        }
    }
    // 폴더별 테스트케이스 조회
    async getFolderTestCases(folderId) {
        try {
            const { getPgClient } = await Promise.resolve().then(() => __importStar(require('../../../infrastructure/database/pgClient')));
            const pgClient = getPgClient();
            if (!pgClient) {
                throw new Error('PostgreSQL 클라이언트가 초기화되지 않았습니다.');
            }
            // 먼저 해당 폴더가 어떤 테이블에 있는지 확인
            const folderCheckResult = await pgClient.query(`
        SELECT 'folders' as source_table FROM folders WHERE id = $1
        UNION ALL
        SELECT 'tree_nodes' as source_table FROM tree_nodes WHERE id = $1 AND type = 'folder'
      `, [folderId]);
            if (folderCheckResult.rows.length === 0) {
                return [];
            }
            const sourceTable = folderCheckResult.rows[0].source_table;
            let result;
            if (sourceTable === 'folders') {
                // folders 테이블의 폴더인 경우
                result = await pgClient.query(`
          SELECT 
            id,
            title,
            prereq as description,
            priority,
            status,
            created_by,
            created_at,
            updated_at,
            folder_id as folderId
          FROM testcases 
          WHERE folder_id = $1
          ORDER BY sort_order, id
        `, [folderId]);
            }
            else {
                // tree_nodes 테이블의 폴더인 경우 - testcases 테이블에서 조회
                result = await pgClient.query(`
          SELECT 
            id,
            title,
            prereq as description,
            priority,
            status,
            created_by,
            created_at,
            updated_at,
            folder_id as folderId
          FROM testcases 
          WHERE folder_id = $1
          ORDER BY sort_order, id
        `, [folderId]);
            }
            return result.rows.map((row) => ({
                id: row.id,
                title: row.title,
                description: row.description,
                priority: row.priority,
                status: row.status,
                createdBy: row.created_by,
                createdAt: row.created_at,
                updatedAt: row.updated_at,
                folderId: row.folderid
            }));
        }
        catch (error) {
            console.error('폴더 테스트케이스 조회 실패:', error);
            return [];
        }
    }
    // 릴리즈에 테스트케이스 추가
    async addTestCasesToRelease(releaseId, testCaseIds) {
        try {
            const { getPgClient } = await Promise.resolve().then(() => __importStar(require('../../../infrastructure/database/pgClient')));
            const pgClient = getPgClient();
            if (!pgClient) {
                throw new Error('PostgreSQL 클라이언트가 초기화되지 않았습니다.');
            }
            // 트랜잭션 시작
            await pgClient.query('BEGIN');
            const addedTestCases = [];
            for (const testCaseId of testCaseIds) {
                try {
                    // 먼저 테스트케이스 정보 조회
                    const testCaseResult = await pgClient.query('SELECT id, title, priority, status FROM testcases WHERE id = $1', [testCaseId]);
                    if (testCaseResult.rows.length === 0) {
                        console.warn(`테스트케이스 ${testCaseId}를 찾을 수 없습니다.`);
                        continue;
                    }
                    const testCase = testCaseResult.rows[0];
                    // 이미 추가된 테스트케이스인지 확인
                    const existingResult = await pgClient.query('SELECT id FROM release_test_cases WHERE release_id = $1 AND test_case_id = $2', [releaseId, testCaseId]);
                    if (existingResult.rows.length === 0) {
                        // 릴리즈에 테스트케이스 추가
                        const insertResult = await pgClient.query(`INSERT INTO release_test_cases (release_id, test_case_id, test_case_name, status, created_at, updated_at)
               VALUES ($1, $2, $3, 'NOT_EXECUTED', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)
               RETURNING *`, [releaseId, testCaseId, testCase.title]);
                        addedTestCases.push({
                            ...insertResult.rows[0],
                            testCase: testCase
                        });
                    }
                    else {
                        // 이미 존재하는 테스트케이스도 카운트에 포함
                        const existingTestCase = existingResult.rows[0];
                        addedTestCases.push({
                            ...existingTestCase,
                            testCase: testCase
                        });
                    }
                }
                catch (error) {
                    console.error(`테스트케이스 ${testCaseId} 추가 실패:`, error);
                }
            }
            // 트랜잭션 커밋
            await pgClient.query('COMMIT');
            return {
                addedCount: addedTestCases.length,
                testCases: addedTestCases
            };
        }
        catch (error) {
            console.error('릴리즈에 테스트케이스 추가 실패:', error);
            throw error;
        }
    }
    // 통계 정보 조회
    async getStatistics(releaseId) {
        const release = await this.findById(releaseId);
        if (!release)
            return null;
        // 임시 통계 데이터 (실제로는 ReleaseCase 데이터를 기반으로 계산)
        return {
            totalCases: 127,
            passedCases: 108,
            failedCases: 19,
            blockedCases: 3,
            notRunCases: 15,
            passRate: 85,
            progress: 88
        };
    }
    // 릴리즈 실행 통계 조회
    async getExecutionStats(releaseId) {
        try {
            const { getPgClient } = await Promise.resolve().then(() => __importStar(require('../../../infrastructure/database/pgClient')));
            const pgClient = getPgClient();
            if (!pgClient) {
                throw new Error('PostgreSQL 클라이언트가 초기화되지 않았습니다.');
            }
            // 릴리즈에 연결된 테스트케이스들의 실행 상태를 조회
            const result = await pgClient.query(`
        SELECT 
          COUNT(*) as total,
          COUNT(CASE WHEN status = 'Pass' THEN 1 END) as passed,
          COUNT(CASE WHEN status = 'Fail' THEN 1 END) as failed,
          COUNT(CASE WHEN status IN ('Block', 'Blocked') THEN 1 END) as blocked,
          COUNT(CASE WHEN status = 'Skip' THEN 1 END) as skipped,
          COUNT(CASE WHEN status = 'NOT_EXECUTED' THEN 1 END) as notRun
        FROM release_test_cases
        WHERE release_id = $1::uuid
      `, [releaseId]);
            const stats = result.rows[0];
            const total = parseInt(stats.total) || 0;
            const passed = parseInt(stats.passed) || 0;
            const failed = parseInt(stats.failed) || 0;
            const blocked = parseInt(stats.blocked) || 0;
            const skipped = parseInt(stats.skipped) || 0;
            const notRun = parseInt(stats.notRun) || 0;
            const executed = total - notRun;
            const passRate = executed > 0 ? Math.round((passed / executed) * 100) : 0;
            console.log('=== 실행 통계 계산 ===');
            console.log('releaseId:', releaseId);
            console.log('raw stats:', stats);
            console.log('calculated values:', {
                total,
                passed,
                failed,
                blocked,
                skipped,
                notRun,
                executed,
                passRate
            });
            return {
                planned: total,
                executed,
                passed,
                failed,
                blocked,
                skipped,
                passRate
            };
        }
        catch (error) {
            console.error('실행 통계 조회 실패:', error);
            // 에러 시 0개 반환 (실시간 동기화를 위해)
            return {
                planned: 0,
                executed: 0,
                passed: 0,
                failed: 0,
                blocked: 0,
                skipped: 0,
                passRate: 0
            };
        }
    }
    // 릴리즈 실행 통계 업데이트
    async updateExecutionStats(releaseId, plannedCount) {
        try {
            const { getPgClient } = await Promise.resolve().then(() => __importStar(require('../../../infrastructure/database/pgClient')));
            const pgClient = getPgClient();
            if (!pgClient) {
                throw new Error('PostgreSQL 클라이언트가 초기화되지 않았습니다.');
            }
            // release_test_cases 테이블에서 실행 상태 조회
            const result = await pgClient.query(`
        SELECT 
          COUNT(CASE WHEN status = 'Pass' THEN 1 END) as passed,
          COUNT(CASE WHEN status = 'Fail' THEN 1 END) as failed,
          COUNT(CASE WHEN status IN ('Block', 'Blocked') THEN 1 END) as blocked,
          COUNT(CASE WHEN status = 'Skip' THEN 1 END) as skipped,
          COUNT(CASE WHEN status = 'Not Run' THEN 1 END) as notRun
        FROM release_test_cases
        WHERE release_id = $1
      `, [releaseId]);
            const stats = result.rows[0];
            const passed = parseInt(stats.passed) || 0;
            const failed = parseInt(stats.failed) || 0;
            const blocked = parseInt(stats.blocked) || 0;
            const skipped = parseInt(stats.skipped) || 0;
            const notRun = parseInt(stats.notRun) || 0;
            const executed = plannedCount - notRun;
            const passRate = executed > 0 ? Math.round((passed / executed) * 100) : 0;
            return {
                planned: plannedCount,
                executed,
                passed,
                failed,
                blocked,
                skipped,
                passRate
            };
        }
        catch (error) {
            console.error('실행 통계 업데이트 실패:', error);
            // 에러 시 기본값 반환
            return {
                planned: plannedCount,
                executed: 0,
                passed: 0,
                failed: 0,
                blocked: 0,
                skipped: 0,
                passRate: 0
            };
        }
    }
    // 릴리즈에 가져온 폴더 목록 조회
    async getImportedFolders(releaseId) {
        try {
            const { getPgClient } = await Promise.resolve().then(() => __importStar(require('../../../infrastructure/database/pgClient')));
            const pgClient = getPgClient();
            if (!pgClient) {
                throw new Error('PostgreSQL 클라이언트가 초기화되지 않았습니다.');
            }
            const result = await pgClient.query(`
        SELECT 
          id,
          release_id,
          folder_id,
          folder_name,
          parent_id,
          test_case_count,
          created_at,
          updated_at
        FROM release_imported_folders
        WHERE release_id = $1
        ORDER BY created_at ASC
      `, [releaseId]);
            return result.rows.map((row) => ({
                id: row.id,
                releaseId: row.release_id,
                folderId: row.folder_id,
                name: row.folder_name,
                parentId: row.parent_id,
                testCaseCount: row.test_case_count,
                createdAt: row.created_at,
                updatedAt: row.updated_at
            }));
        }
        catch (error) {
            console.error('가져온 폴더 목록 조회 실패:', error);
            return [];
        }
    }
    // 릴리즈에 폴더 추가
    async addImportedFolders(releaseId, folders) {
        try {
            const { getPgClient } = await Promise.resolve().then(() => __importStar(require('../../../infrastructure/database/pgClient')));
            const pgClient = getPgClient();
            if (!pgClient) {
                throw new Error('PostgreSQL 클라이언트가 초기화되지 않았습니다.');
            }
            const addedFolders = [];
            for (const folder of folders) {
                // 중복 체크
                const existingResult = await pgClient.query(`
          SELECT id FROM release_imported_folders 
          WHERE release_id = $1 AND folder_id = $2
        `, [releaseId, folder.folder_id]);
                if (existingResult.rows.length === 0) {
                    // 새 폴더 추가
                    const result = await pgClient.query(`
            INSERT INTO release_imported_folders 
            (release_id, folder_id, folder_name, parent_id, test_case_count)
            VALUES ($1, $2, $3, $4, $5)
            RETURNING *
          `, [
                        releaseId,
                        folder.folder_id,
                        folder.folder_name,
                        folder.parent_id || null,
                        folder.test_case_count || 0
                    ]);
                    addedFolders.push(result.rows[0]);
                }
            }
            return addedFolders;
        }
        catch (error) {
            console.error('폴더 추가 실패:', error);
            throw error;
        }
    }
    // 릴리즈에서 폴더 제거
    async removeImportedFolder(releaseId, folderId) {
        try {
            const { getPgClient } = await Promise.resolve().then(() => __importStar(require('../../../infrastructure/database/pgClient')));
            const pgClient = getPgClient();
            if (!pgClient) {
                throw new Error('PostgreSQL 클라이언트가 초기화되지 않았습니다.');
            }
            await pgClient.query(`
        DELETE FROM release_imported_folders 
        WHERE release_id = $1 AND folder_id = $2
      `, [releaseId, folderId]);
        }
        catch (error) {
            console.error('폴더 제거 실패:', error);
            throw error;
        }
    }
    // 릴리즈 삭제
    async deleteRelease(id) {
        try {
            const { getPgClient } = await Promise.resolve().then(() => __importStar(require('../../../infrastructure/database/pgClient')));
            const pgClient = getPgClient();
            if (!pgClient) {
                throw new Error('PostgreSQL 클라이언트가 초기화되지 않았습니다.');
            }
            // 릴리즈와 관련된 데이터들을 먼저 삭제 (존재하는 테이블만)
            await pgClient.query('DELETE FROM release_imported_folders WHERE release_id = $1', [id]);
            await pgClient.query('DELETE FROM release_test_cases WHERE release_id = $1', [id]);
            // 마지막으로 릴리즈 삭제
            const result = await pgClient.query('DELETE FROM releases WHERE id = $1', [id]);
            if (result.rowCount === 0) {
                throw new Error('삭제할 릴리즈를 찾을 수 없습니다.');
            }
        }
        catch (error) {
            console.error('릴리즈 삭제 실패:', error);
            throw error;
        }
    }
    // 초기 데이터 로드 (개발용)
    async loadInitialData() {
        // 데이터베이스에 이미 데이터가 있는지 확인
        const existingReleases = await this.findAll();
        if (existingReleases.length > 0)
            return; // 이미 데이터가 있으면 스킵
        const initialReleases = [
            {
                projectId: '1',
                name: '2024.12.0 릴리즈',
                version: '2024.12.0',
                description: '2024년 12월 정기 릴리즈',
                status: 'Active',
                startAt: '2024-12-01',
                endAt: '2024-12-15',
                owners: ['user1'],
                watchers: ['user2', 'user3'],
                tags: ['정기', '중요'],
                createdBy: 'user1',
                updatedBy: 'user1',
                settings: {
                    gateCriteria: {
                        minPassRate: 85,
                        maxFailCritical: 0,
                        zeroBlockers: true,
                        coverageByPriority: {
                            P0: 100,
                            P1: 95,
                            P2: 90
                        }
                    },
                    autoSyncScope: true,
                    allowReopen: false
                }
            },
            {
                projectId: '1',
                name: '2024.11.1 핫픽스',
                version: '2024.11.1',
                description: '긴급 버그 수정 릴리즈',
                status: 'Complete',
                startAt: '2024-11-15',
                endAt: '2024-11-20',
                owners: ['user2'],
                watchers: ['user1'],
                tags: ['핫픽스', '긴급'],
                createdBy: 'user2',
                updatedBy: 'user2',
                settings: {
                    gateCriteria: {
                        minPassRate: 90,
                        maxFailCritical: 0,
                        zeroBlockers: true,
                        coverageByPriority: {
                            P0: 100,
                            P1: 100,
                            P2: 95
                        }
                    },
                    autoSyncScope: false,
                    allowReopen: true
                }
            }
        ];
        for (const releaseData of initialReleases) {
            await this.create(releaseData);
        }
    }
}
exports.ReleaseRepository = ReleaseRepository;
exports.releaseRepository = new ReleaseRepository();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzLzNpLWExLTIwMjEtMDE3L0RvY3VtZW50cy9xdWVzdC9EZXNrdG9wL3F1ZXN0L3NyYy9tYWluL2FwcC9kb21haW5zL3JlbGVhc2VzL3JlcG9zaXRvcmllcy9yZWxlYXNlUmVwb3NpdG9yeS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQSxNQUFhLGlCQUFpQjtJQUM1QixZQUFZO0lBQ1osS0FBSyxDQUFDLE9BQU87UUFDWCxJQUFJLENBQUM7WUFDSCxNQUFNLEVBQUUsV0FBVyxFQUFFLEdBQUcsd0RBQWEsMkNBQTJDLEdBQUMsQ0FBQztZQUNsRixNQUFNLFFBQVEsR0FBRyxXQUFXLEVBQUUsQ0FBQztZQUUvQixJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7Z0JBQ2QsTUFBTSxJQUFJLEtBQUssQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDO1lBQ3BELENBQUM7WUFFRCxNQUFNLE1BQU0sR0FBRyxNQUFNLFFBQVEsQ0FBQyxLQUFLLENBQUM7Ozs7Ozs7Ozs7Ozs7O09BY25DLENBQUMsQ0FBQztZQUVILE9BQU8sTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFRLEVBQUUsRUFBRSxDQUFDLENBQUM7Z0JBQ3BDLEVBQUUsRUFBRSxHQUFHLENBQUMsRUFBRTtnQkFDVixTQUFTLEVBQUUsR0FBRztnQkFDZCxJQUFJLEVBQUUsR0FBRyxDQUFDLElBQUk7Z0JBQ2QsT0FBTyxFQUFFLEdBQUcsQ0FBQyxPQUFPO2dCQUNwQixXQUFXLEVBQUUsR0FBRyxDQUFDLFdBQVcsSUFBSSxFQUFFO2dCQUNsQyxNQUFNLEVBQUUsR0FBRyxDQUFDLE1BQU07Z0JBQ2xCLE9BQU8sRUFBRSxHQUFHLENBQUMsY0FBYztnQkFDM0IsS0FBSyxFQUFFLEdBQUcsQ0FBQyxhQUFhO2dCQUN4QixNQUFNLEVBQUUsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7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LEVBQUUsRUFBRTt5QkFDUDtxQkFDRjtvQkFDRCxhQUFhLEVBQUUsS0FBSztvQkFDcEIsV0FBVyxFQUFFLElBQUk7aUJBQ2xCO2FBQ0Y7U0FDRixDQUFDO1FBRUYsS0FBSyxNQUFNLFdBQVcsSUFBSSxlQUFlLEVBQUUsQ0FBQztZQUMxQyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDakMsQ0FBQztJQUNILENBQUM7Q0FDRjtBQTUzQ0QsOENBNDNDQztBQUVZLFFBQUEsaUJBQWlCLEdBQUcsSUFBSSxpQkFBaUIsRUFBRSxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy8zaS1hMS0yMDIxLTAxNy9Eb2N1bWVudHMvcXVlc3QvRGVza3RvcC9xdWVzdC9zcmMvbWFpbi9hcHAvZG9tYWlucy9yZWxlYXNlcy9yZXBvc2l0b3JpZXMvcmVsZWFzZVJlcG9zaXRvcnkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVsZWFzZSwgUmVsZWFzZVNjb3BlLCBSZWxlYXNlQ2FzZSwgUnVuLCBEZWZlY3RMaW5rLCBFbnZpcm9ubWVudCB9IGZyb20gJy4uL2VudGl0aWVzL3JlbGVhc2UnO1xuXG5leHBvcnQgY2xhc3MgUmVsZWFzZVJlcG9zaXRvcnkge1xuICAvLyDrqqjrk6Ag66a066as7KaIIOyhsO2ajFxuICBhc3luYyBmaW5kQWxsKCk6IFByb21pc2U8UmVsZWFzZVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZ2V0UGdDbGllbnQgfSA9IGF3YWl0IGltcG9ydCgnLi4vLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvZGF0YWJhc2UvcGdDbGllbnQnKTtcbiAgICAgIGNvbnN0IHBnQ2xpZW50ID0gZ2V0UGdDbGllbnQoKTtcbiAgICAgIFxuICAgICAgaWYgKCFwZ0NsaWVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Bvc3RncmVTUUwg7YG065287J207Ja47Yq46rCAIOy0iOq4sO2ZlOuQmOyngCDslYrslZjsirXri4jri6QuJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBnQ2xpZW50LnF1ZXJ5KGBcbiAgICAgICAgU0VMRUNUIFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgdmVyc2lvbixcbiAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgYXNzaWduZWVfbmFtZSxcbiAgICAgICAgICBzY2hlZHVsZWRfZGF0ZSxcbiAgICAgICAgICBkZXBsb3llZF9kYXRlLFxuICAgICAgICAgIGNyZWF0ZWRfYXQsXG4gICAgICAgICAgdXBkYXRlZF9hdFxuICAgICAgICBGUk9NIHJlbGVhc2VzXG4gICAgICAgIE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQ1xuICAgICAgYCk7XG5cbiAgICAgIHJldHVybiByZXN1bHQucm93cy5tYXAoKHJvdzogYW55KSA9PiAoe1xuICAgICAgICBpZDogcm93LmlkLFxuICAgICAgICBwcm9qZWN0SWQ6ICcxJyxcbiAgICAgICAgbmFtZTogcm93Lm5hbWUsXG4gICAgICAgIHZlcnNpb246IHJvdy52ZXJzaW9uLFxuICAgICAgICBkZXNjcmlwdGlvbjogcm93LmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICBzdGF0dXM6IHJvdy5zdGF0dXMsXG4gICAgICAgIHN0YXJ0QXQ6IHJvdy5zY2hlZHVsZWRfZGF0ZSxcbiAgICAgICAgZW5kQXQ6IHJvdy5kZXBsb3llZF9kYXRlLFxuICAgICAgICBvd25lcnM6IHJvdy5hc3NpZ25lZV9uYW1lID8gW3Jvdy5hc3NpZ25lZV9uYW1lXSA6IFtdLFxuICAgICAgICBhc3NpZ25lZV9uYW1lOiByb3cuYXNzaWduZWVfbmFtZSxcbiAgICAgICAgd2F0Y2hlcnM6IFtdLFxuICAgICAgICB0YWdzOiBbXSxcbiAgICAgICAgY3JlYXRlZEJ5OiAnc3lzdGVtJyxcbiAgICAgICAgdXBkYXRlZEJ5OiAnc3lzdGVtJyxcbiAgICAgICAgY3JlYXRlZEF0OiByb3cuY3JlYXRlZF9hdCxcbiAgICAgICAgdXBkYXRlZEF0OiByb3cudXBkYXRlZF9hdCxcbiAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICBnYXRlQ3JpdGVyaWE6IHtcbiAgICAgICAgICAgIG1pblBhc3NSYXRlOiA4NSxcbiAgICAgICAgICAgIG1heEZhaWxDcml0aWNhbDogMCxcbiAgICAgICAgICAgIHplcm9CbG9ja2VyczogdHJ1ZSxcbiAgICAgICAgICAgIGNvdmVyYWdlQnlQcmlvcml0eToge1xuICAgICAgICAgICAgICBQMDogMTAwLFxuICAgICAgICAgICAgICBQMTogOTUsXG4gICAgICAgICAgICAgIFAyOiA5MFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYXV0b1N5bmNTY29wZTogdHJ1ZSxcbiAgICAgICAgICBhbGxvd1Jlb3BlbjogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfrprTrpqzspogg7KGw7ZqMIOyLpO2MqDonLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107IC8vIOyLpO2MqCDsi5wg67mIIOuwsOyXtCDrsJjtmZhcbiAgICB9XG4gIH1cblxuICAvLyBJROuhnCDrprTrpqzspogg7KGw7ZqMXG4gIGFzeW5jIGZpbmRCeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPFJlbGVhc2UgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZ2V0UGdDbGllbnQgfSA9IGF3YWl0IGltcG9ydCgnLi4vLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvZGF0YWJhc2UvcGdDbGllbnQnKTtcbiAgICAgIGNvbnN0IHBnQ2xpZW50ID0gZ2V0UGdDbGllbnQoKTtcbiAgICAgIFxuICAgICAgaWYgKCFwZ0NsaWVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Bvc3RncmVTUUwg7YG065287J207Ja47Yq46rCAIOy0iOq4sO2ZlOuQmOyngCDslYrslZjsirXri4jri6QuJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBnQ2xpZW50LnF1ZXJ5KGBcbiAgICAgICAgU0VMRUNUIFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgdmVyc2lvbixcbiAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgYXNzaWduZWVfbmFtZSxcbiAgICAgICAgICBzY2hlZHVsZWRfZGF0ZSxcbiAgICAgICAgICBkZXBsb3llZF9kYXRlLFxuICAgICAgICAgIGNyZWF0ZWRfYXQsXG4gICAgICAgICAgdXBkYXRlZF9hdFxuICAgICAgICBGUk9NIHJlbGVhc2VzXG4gICAgICAgIFdIRVJFIGlkID0gJDFcbiAgICAgIGAsIFtpZF0pO1xuXG4gICAgICBpZiAocmVzdWx0LnJvd3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByb3cgPSByZXN1bHQucm93c1swXTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBTdHJpbmcocm93LmlkKSxcbiAgICAgICAgcHJvamVjdElkOiAnMScsXG4gICAgICAgIG5hbWU6IHJvdy5uYW1lLFxuICAgICAgICB2ZXJzaW9uOiByb3cudmVyc2lvbixcbiAgICAgICAgZGVzY3JpcHRpb246IHJvdy5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgc3RhdHVzOiByb3cuc3RhdHVzLFxuICAgICAgICBzdGFydEF0OiByb3cuc2NoZWR1bGVkX2RhdGUsXG4gICAgICAgIGVuZEF0OiByb3cuZGVwbG95ZWRfZGF0ZSxcbiAgICAgICAgb3duZXJzOiByb3cuYXNzaWduZWVfbmFtZSA/IFtyb3cuYXNzaWduZWVfbmFtZV0gOiBbXSxcbiAgICAgICAgYXNzaWduZWVfbmFtZTogcm93LmFzc2lnbmVlX25hbWUsXG4gICAgICAgIHdhdGNoZXJzOiBbXSxcbiAgICAgICAgdGFnczogW10sXG4gICAgICAgIGNyZWF0ZWRCeTogJ3N5c3RlbScsXG4gICAgICAgIHVwZGF0ZWRCeTogJ3N5c3RlbScsXG4gICAgICAgIGNyZWF0ZWRBdDogcm93LmNyZWF0ZWRfYXQsXG4gICAgICAgIHVwZGF0ZWRBdDogcm93LnVwZGF0ZWRfYXQsXG4gICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgZ2F0ZUNyaXRlcmlhOiB7XG4gICAgICAgICAgICBtaW5QYXNzUmF0ZTogODUsXG4gICAgICAgICAgICBtYXhGYWlsQ3JpdGljYWw6IDAsXG4gICAgICAgICAgICB6ZXJvQmxvY2tlcnM6IHRydWUsXG4gICAgICAgICAgICBjb3ZlcmFnZUJ5UHJpb3JpdHk6IHtcbiAgICAgICAgICAgICAgUDA6IDEwMCxcbiAgICAgICAgICAgICAgUDE6IDk1LFxuICAgICAgICAgICAgICBQMjogOTBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGF1dG9TeW5jU2NvcGU6IHRydWUsXG4gICAgICAgICAgYWxsb3dSZW9wZW46IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+umtOumrOymiCDsobDtmowg7Iuk7YyoOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8vIO2UhOuhnOygne2KuOuzhCDrprTrpqzspogg7KGw7ZqMXG4gIGFzeW5jIGZpbmRCeVByb2plY3RJZChwcm9qZWN0SWQ6IHN0cmluZyk6IFByb21pc2U8UmVsZWFzZVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZ2V0UGdDbGllbnQgfSA9IGF3YWl0IGltcG9ydCgnLi4vLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvZGF0YWJhc2UvcGdDbGllbnQnKTtcbiAgICAgIGNvbnN0IHBnQ2xpZW50ID0gZ2V0UGdDbGllbnQoKTtcbiAgICAgIFxuICAgICAgaWYgKCFwZ0NsaWVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Bvc3RncmVTUUwg7YG065287J207Ja47Yq46rCAIOy0iOq4sO2ZlOuQmOyngCDslYrslZjsirXri4jri6QuJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBnQ2xpZW50LnF1ZXJ5KGBcbiAgICAgICAgU0VMRUNUIFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgdmVyc2lvbixcbiAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgYXNzaWduZWVfbmFtZSxcbiAgICAgICAgICBzY2hlZHVsZWRfZGF0ZSxcbiAgICAgICAgICBkZXBsb3llZF9kYXRlLFxuICAgICAgICAgIGNyZWF0ZWRfYXQsXG4gICAgICAgICAgdXBkYXRlZF9hdFxuICAgICAgICBGUk9NIHJlbGVhc2VzXG4gICAgICAgIE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQ1xuICAgICAgYCk7XG5cbiAgICAgIHJldHVybiByZXN1bHQucm93cy5tYXAoKHJvdzogYW55KSA9PiAoe1xuICAgICAgICBpZDogcm93LmlkLFxuICAgICAgICBwcm9qZWN0SWQ6ICcxJyxcbiAgICAgICAgbmFtZTogcm93Lm5hbWUsXG4gICAgICAgIHZlcnNpb246IHJvdy52ZXJzaW9uLFxuICAgICAgICBkZXNjcmlwdGlvbjogcm93LmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICBzdGF0dXM6IHJvdy5zdGF0dXMsXG4gICAgICAgIHN0YXJ0QXQ6IHJvdy5zY2hlZHVsZWRfZGF0ZSxcbiAgICAgICAgZW5kQXQ6IHJvdy5kZXBsb3llZF9kYXRlLFxuICAgICAgICBvd25lcnM6IHJvdy5hc3NpZ25lZV9uYW1lID8gW3Jvdy5hc3NpZ25lZV9uYW1lXSA6IFtdLFxuICAgICAgICBhc3NpZ25lZV9uYW1lOiByb3cuYXNzaWduZWVfbmFtZSxcbiAgICAgICAgd2F0Y2hlcnM6IFtdLFxuICAgICAgICB0YWdzOiBbXSxcbiAgICAgICAgY3JlYXRlZEJ5OiAnc3lzdGVtJyxcbiAgICAgICAgdXBkYXRlZEJ5OiAnc3lzdGVtJyxcbiAgICAgICAgY3JlYXRlZEF0OiByb3cuY3JlYXRlZF9hdCxcbiAgICAgICAgdXBkYXRlZEF0OiByb3cudXBkYXRlZF9hdCxcbiAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICBnYXRlQ3JpdGVyaWE6IHtcbiAgICAgICAgICAgIG1pblBhc3NSYXRlOiA4NSxcbiAgICAgICAgICAgIG1heEZhaWxDcml0aWNhbDogMCxcbiAgICAgICAgICAgIHplcm9CbG9ja2VyczogdHJ1ZSxcbiAgICAgICAgICAgIGNvdmVyYWdlQnlQcmlvcml0eToge1xuICAgICAgICAgICAgICBQMDogMTAwLFxuICAgICAgICAgICAgICBQMTogOTUsXG4gICAgICAgICAgICAgIFAyOiA5MFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYXV0b1N5bmNTY29wZTogdHJ1ZSxcbiAgICAgICAgICBhbGxvd1Jlb3BlbjogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCftlITroZzsoJ3tirjrs4Qg66a066as7KaIIOyhsO2ajCDsi6TtjKg6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIC8vIOumtOumrOymiCDsg53shLFcbiAgYXN5bmMgY3JlYXRlKHJlbGVhc2VEYXRhOiBPbWl0PFJlbGVhc2UsICdpZCcgfCAnY3JlYXRlZEF0JyB8ICd1cGRhdGVkQXQnPik6IFByb21pc2U8UmVsZWFzZT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGdldFBnQ2xpZW50IH0gPSBhd2FpdCBpbXBvcnQoJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL2RhdGFiYXNlL3BnQ2xpZW50Jyk7XG4gICAgICBjb25zdCBwZ0NsaWVudCA9IGdldFBnQ2xpZW50KCk7XG4gICAgICBcbiAgICAgIGlmICghcGdDbGllbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQb3N0Z3JlU1FMIO2BtOudvOydtOyWuO2KuOqwgCDstIjquLDtmZTrkJjsp4Ag7JWK7JWY7Iq164uI64ukLicpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBnQ2xpZW50LnF1ZXJ5KGBcbiAgICAgICAgSU5TRVJUIElOVE8gcmVsZWFzZXMgKFxuICAgICAgICAgIG5hbWUsIHZlcnNpb24sIGRlc2NyaXB0aW9uLCBzdGF0dXMsIGFzc2lnbmVlX25hbWUsIFxuICAgICAgICAgIHNjaGVkdWxlZF9kYXRlLCBkZXBsb3llZF9kYXRlLCBjcmVhdGVkX2F0LCB1cGRhdGVkX2F0XG4gICAgICAgICkgVkFMVUVTICgkMSwgJDIsICQzLCAkNCwgJDUsICQ2LCAkNywgJDgsICQ5KVxuICAgICAgICBSRVRVUk5JTkcgKlxuICAgICAgYCwgW1xuICAgICAgICByZWxlYXNlRGF0YS5uYW1lLFxuICAgICAgICByZWxlYXNlRGF0YS52ZXJzaW9uLFxuICAgICAgICByZWxlYXNlRGF0YS5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgcmVsZWFzZURhdGEuc3RhdHVzLFxuICAgICAgICByZWxlYXNlRGF0YS5hc3NpZ25lZSB8fCByZWxlYXNlRGF0YS5vd25lcnM/LlswXSB8fCBudWxsLFxuICAgICAgICByZWxlYXNlRGF0YS5zdGFydEF0IHx8IG51bGwsXG4gICAgICAgIHJlbGVhc2VEYXRhLmVuZEF0IHx8IG51bGwsXG4gICAgICAgIG5vdyxcbiAgICAgICAgbm93XG4gICAgICBdKTtcblxuICAgICAgY29uc3QgY3JlYXRlZFJlbGVhc2UgPSByZXN1bHQucm93c1swXTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IGNyZWF0ZWRSZWxlYXNlLmlkLFxuICAgICAgICBwcm9qZWN0SWQ6ICcxJyxcbiAgICAgICAgbmFtZTogY3JlYXRlZFJlbGVhc2UubmFtZSxcbiAgICAgICAgdmVyc2lvbjogY3JlYXRlZFJlbGVhc2UudmVyc2lvbixcbiAgICAgICAgZGVzY3JpcHRpb246IGNyZWF0ZWRSZWxlYXNlLmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICBzdGF0dXM6IGNyZWF0ZWRSZWxlYXNlLnN0YXR1cyxcbiAgICAgICAgc3RhcnRBdDogY3JlYXRlZFJlbGVhc2Uuc2NoZWR1bGVkX2RhdGUsXG4gICAgICAgIGVuZEF0OiBjcmVhdGVkUmVsZWFzZS5kZXBsb3llZF9kYXRlLFxuICAgICAgICBvd25lcnM6IGNyZWF0ZWRSZWxlYXNlLmFzc2lnbmVlX25hbWUgPyBbY3JlYXRlZFJlbGVhc2UuYXNzaWduZWVfbmFtZV0gOiBbXSxcbiAgICAgICAgYXNzaWduZWVfbmFtZTogY3JlYXRlZFJlbGVhc2UuYXNzaWduZWVfbmFtZSxcbiAgICAgICAgd2F0Y2hlcnM6IFtdLFxuICAgICAgICB0YWdzOiBbXSxcbiAgICAgICAgY3JlYXRlZEJ5OiAnc3lzdGVtJyxcbiAgICAgICAgdXBkYXRlZEJ5OiAnc3lzdGVtJyxcbiAgICAgICAgY3JlYXRlZEF0OiBjcmVhdGVkUmVsZWFzZS5jcmVhdGVkX2F0LFxuICAgICAgICB1cGRhdGVkQXQ6IGNyZWF0ZWRSZWxlYXNlLnVwZGF0ZWRfYXQsXG4gICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgZ2F0ZUNyaXRlcmlhOiB7XG4gICAgICAgICAgICBtaW5QYXNzUmF0ZTogODUsXG4gICAgICAgICAgICBtYXhGYWlsQ3JpdGljYWw6IDAsXG4gICAgICAgICAgICB6ZXJvQmxvY2tlcnM6IHRydWUsXG4gICAgICAgICAgICBjb3ZlcmFnZUJ5UHJpb3JpdHk6IHtcbiAgICAgICAgICAgICAgUDA6IDEwMCxcbiAgICAgICAgICAgICAgUDE6IDk1LFxuICAgICAgICAgICAgICBQMjogOTBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGF1dG9TeW5jU2NvcGU6IHRydWUsXG4gICAgICAgICAgYWxsb3dSZW9wZW46IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+umtOumrOymiCDsg53shLEg7Iuk7YyoOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vIOumtOumrOymiCDsl4XrjbDsnbTtirhcbiAgYXN5bmMgdXBkYXRlKGlkOiBzdHJpbmcsIHVwZGF0ZURhdGE6IFBhcnRpYWw8UmVsZWFzZT4pOiBQcm9taXNlPFJlbGVhc2UgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZ2V0UGdDbGllbnQgfSA9IGF3YWl0IGltcG9ydCgnLi4vLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvZGF0YWJhc2UvcGdDbGllbnQnKTtcbiAgICAgIGNvbnN0IHBnQ2xpZW50ID0gZ2V0UGdDbGllbnQoKTtcbiAgICAgIFxuICAgICAgaWYgKCFwZ0NsaWVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Bvc3RncmVTUUwg7YG065287J207Ja47Yq46rCAIOy0iOq4sO2ZlOuQmOyngCDslYrslZjsirXri4jri6QuJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGdDbGllbnQucXVlcnkoYFxuICAgICAgICBVUERBVEUgcmVsZWFzZXMgXG4gICAgICAgIFNFVCBcbiAgICAgICAgICBuYW1lID0gQ09BTEVTQ0UoJDEsIG5hbWUpLFxuICAgICAgICAgIHZlcnNpb24gPSBDT0FMRVNDRSgkMiwgdmVyc2lvbiksXG4gICAgICAgICAgZGVzY3JpcHRpb24gPSBDT0FMRVNDRSgkMywgZGVzY3JpcHRpb24pLFxuICAgICAgICAgIHN0YXR1cyA9IENPQUxFU0NFKCQ0LCBzdGF0dXMpLFxuICAgICAgICAgIGFzc2lnbmVlX25hbWUgPSBDT0FMRVNDRSgkNSwgYXNzaWduZWVfbmFtZSksXG4gICAgICAgICAgc2NoZWR1bGVkX2RhdGUgPSBDT0FMRVNDRSgkNiwgc2NoZWR1bGVkX2RhdGUpLFxuICAgICAgICAgIGRlcGxveWVkX2RhdGUgPSBDT0FMRVNDRSgkNywgZGVwbG95ZWRfZGF0ZSksXG4gICAgICAgICAgdXBkYXRlZF9hdCA9ICQ4XG4gICAgICAgIFdIRVJFIGlkID0gJDlcbiAgICAgICAgUkVUVVJOSU5HICpcbiAgICAgIGAsIFtcbiAgICAgICAgdXBkYXRlRGF0YS5uYW1lLFxuICAgICAgICB1cGRhdGVEYXRhLnZlcnNpb24sXG4gICAgICAgIHVwZGF0ZURhdGEuZGVzY3JpcHRpb24sXG4gICAgICAgIHVwZGF0ZURhdGEuc3RhdHVzLFxuICAgICAgICB1cGRhdGVEYXRhLm93bmVycz8uWzBdIHx8IG51bGwsXG4gICAgICAgIHVwZGF0ZURhdGEuc3RhcnRBdCxcbiAgICAgICAgdXBkYXRlRGF0YS5lbmRBdCxcbiAgICAgICAgbm93LFxuICAgICAgICBpZFxuICAgICAgXSk7XG5cbiAgICAgIGlmIChyZXN1bHQucm93cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVwZGF0ZWRSZWxlYXNlID0gcmVzdWx0LnJvd3NbMF07XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiB1cGRhdGVkUmVsZWFzZS5pZCxcbiAgICAgICAgcHJvamVjdElkOiAnMScsXG4gICAgICAgIG5hbWU6IHVwZGF0ZWRSZWxlYXNlLm5hbWUsXG4gICAgICAgIHZlcnNpb246IHVwZGF0ZWRSZWxlYXNlLnZlcnNpb24sXG4gICAgICAgIGRlc2NyaXB0aW9uOiB1cGRhdGVkUmVsZWFzZS5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgc3RhdHVzOiB1cGRhdGVkUmVsZWFzZS5zdGF0dXMsXG4gICAgICAgIHN0YXJ0QXQ6IHVwZGF0ZWRSZWxlYXNlLnNjaGVkdWxlZF9kYXRlLFxuICAgICAgICBlbmRBdDogdXBkYXRlZFJlbGVhc2UuZGVwbG95ZWRfZGF0ZSxcbiAgICAgICAgb3duZXJzOiB1cGRhdGVkUmVsZWFzZS5hc3NpZ25lZV9uYW1lID8gW3VwZGF0ZWRSZWxlYXNlLmFzc2lnbmVlX25hbWVdIDogW10sXG4gICAgICAgIHdhdGNoZXJzOiBbXSxcbiAgICAgICAgdGFnczogW10sXG4gICAgICAgIGNyZWF0ZWRCeTogJ3N5c3RlbScsXG4gICAgICAgIHVwZGF0ZWRCeTogJ3N5c3RlbScsXG4gICAgICAgIGNyZWF0ZWRBdDogdXBkYXRlZFJlbGVhc2UuY3JlYXRlZF9hdCxcbiAgICAgICAgdXBkYXRlZEF0OiB1cGRhdGVkUmVsZWFzZS51cGRhdGVkX2F0LFxuICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgIGdhdGVDcml0ZXJpYToge1xuICAgICAgICAgICAgbWluUGFzc1JhdGU6IDg1LFxuICAgICAgICAgICAgbWF4RmFpbENyaXRpY2FsOiAwLFxuICAgICAgICAgICAgemVyb0Jsb2NrZXJzOiB0cnVlLFxuICAgICAgICAgICAgY292ZXJhZ2VCeVByaW9yaXR5OiB7XG4gICAgICAgICAgICAgIFAwOiAxMDAsXG4gICAgICAgICAgICAgIFAxOiA5NSxcbiAgICAgICAgICAgICAgUDI6IDkwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBhdXRvU3luY1Njb3BlOiB0cnVlLFxuICAgICAgICAgIGFsbG93UmVvcGVuOiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfrprTrpqzspogg7JeF642w7J207Yq4IOyLpO2MqDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvLyDrprTrpqzspogg7IKt7KCcICjrqZTrqqjrpqwg67Cw7Je0IOq4sOuwmCAtIGRlcHJlY2F0ZWQpXG4gIGFzeW5jIGRlbGV0ZShpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuZGVsZXRlUmVsZWFzZShpZCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign66a066as7KaIIOyCreygnCDsi6TtjKg6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8vIOyDge2DnOuzhCDrprTrpqzspogg7KGw7ZqMXG4gIGFzeW5jIGZpbmRCeVN0YXR1cyhzdGF0dXM6IFJlbGVhc2VbJ3N0YXR1cyddKTogUHJvbWlzZTxSZWxlYXNlW10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBnZXRQZ0NsaWVudCB9ID0gYXdhaXQgaW1wb3J0KCcuLi8uLi8uLi9pbmZyYXN0cnVjdHVyZS9kYXRhYmFzZS9wZ0NsaWVudCcpO1xuICAgICAgY29uc3QgcGdDbGllbnQgPSBnZXRQZ0NsaWVudCgpO1xuICAgICAgXG4gICAgICBpZiAoIXBnQ2xpZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUG9zdGdyZVNRTCDtgbTrnbzsnbTslrjtirjqsIAg7LSI6riw7ZmU65CY7KeAIOyViuyVmOyKteuLiOuLpC4nKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGdDbGllbnQucXVlcnkoYFxuICAgICAgICBTRUxFQ1QgXG4gICAgICAgICAgaWQsXG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICB2ZXJzaW9uLFxuICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICBhc3NpZ25lZV9uYW1lLFxuICAgICAgICAgIHNjaGVkdWxlZF9kYXRlLFxuICAgICAgICAgIGRlcGxveWVkX2RhdGUsXG4gICAgICAgICAgY3JlYXRlZF9hdCxcbiAgICAgICAgICB1cGRhdGVkX2F0XG4gICAgICAgIEZST00gcmVsZWFzZXNcbiAgICAgICAgV0hFUkUgc3RhdHVzID0gJDFcbiAgICAgICAgT1JERVIgQlkgY3JlYXRlZF9hdCBERVNDXG4gICAgICBgLCBbc3RhdHVzXSk7XG5cbiAgICAgIHJldHVybiByZXN1bHQucm93cy5tYXAoKHJvdzogYW55KSA9PiAoe1xuICAgICAgICBpZDogcm93LmlkLFxuICAgICAgICBwcm9qZWN0SWQ6ICcxJyxcbiAgICAgICAgbmFtZTogcm93Lm5hbWUsXG4gICAgICAgIHZlcnNpb246IHJvdy52ZXJzaW9uLFxuICAgICAgICBkZXNjcmlwdGlvbjogcm93LmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICBzdGF0dXM6IHJvdy5zdGF0dXMsXG4gICAgICAgIHN0YXJ0QXQ6IHJvdy5zY2hlZHVsZWRfZGF0ZSxcbiAgICAgICAgZW5kQXQ6IHJvdy5kZXBsb3llZF9kYXRlLFxuICAgICAgICBvd25lcnM6IHJvdy5hc3NpZ25lZV9uYW1lID8gW3Jvdy5hc3NpZ25lZV9uYW1lXSA6IFtdLFxuICAgICAgICBhc3NpZ25lZV9uYW1lOiByb3cuYXNzaWduZWVfbmFtZSxcbiAgICAgICAgd2F0Y2hlcnM6IFtdLFxuICAgICAgICB0YWdzOiBbXSxcbiAgICAgICAgY3JlYXRlZEJ5OiAnc3lzdGVtJyxcbiAgICAgICAgdXBkYXRlZEJ5OiAnc3lzdGVtJyxcbiAgICAgICAgY3JlYXRlZEF0OiByb3cuY3JlYXRlZF9hdCxcbiAgICAgICAgdXBkYXRlZEF0OiByb3cudXBkYXRlZF9hdCxcbiAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICBnYXRlQ3JpdGVyaWE6IHtcbiAgICAgICAgICAgIG1pblBhc3NSYXRlOiA4NSxcbiAgICAgICAgICAgIG1heEZhaWxDcml0aWNhbDogMCxcbiAgICAgICAgICAgIHplcm9CbG9ja2VyczogdHJ1ZSxcbiAgICAgICAgICAgIGNvdmVyYWdlQnlQcmlvcml0eToge1xuICAgICAgICAgICAgICBQMDogMTAwLFxuICAgICAgICAgICAgICBQMTogOTUsXG4gICAgICAgICAgICAgIFAyOiA5MFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYXV0b1N5bmNTY29wZTogdHJ1ZSxcbiAgICAgICAgICBhbGxvd1Jlb3BlbjogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfsg4Htg5zrs4Qg66a066as7KaIIOyhsO2ajCDsi6TtjKg6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIC8vIOqygOyDieyWtOuhnCDrprTrpqzspogg7KGw7ZqMXG4gIGFzeW5jIHNlYXJjaChxdWVyeTogc3RyaW5nKTogUHJvbWlzZTxSZWxlYXNlW10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBnZXRQZ0NsaWVudCB9ID0gYXdhaXQgaW1wb3J0KCcuLi8uLi8uLi9pbmZyYXN0cnVjdHVyZS9kYXRhYmFzZS9wZ0NsaWVudCcpO1xuICAgICAgY29uc3QgcGdDbGllbnQgPSBnZXRQZ0NsaWVudCgpO1xuICAgICAgXG4gICAgICBpZiAoIXBnQ2xpZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUG9zdGdyZVNRTCDtgbTrnbzsnbTslrjtirjqsIAg7LSI6riw7ZmU65CY7KeAIOyViuyVmOyKteuLiOuLpC4nKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc2VhcmNoUGF0dGVybiA9IGAlJHtxdWVyeX0lYDtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGdDbGllbnQucXVlcnkoYFxuICAgICAgICBTRUxFQ1QgXG4gICAgICAgICAgaWQsXG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICB2ZXJzaW9uLFxuICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICBhc3NpZ25lZV9uYW1lLFxuICAgICAgICAgIHNjaGVkdWxlZF9kYXRlLFxuICAgICAgICAgIGRlcGxveWVkX2RhdGUsXG4gICAgICAgICAgY3JlYXRlZF9hdCxcbiAgICAgICAgICB1cGRhdGVkX2F0XG4gICAgICAgIEZST00gcmVsZWFzZXNcbiAgICAgICAgV0hFUkUgXG4gICAgICAgICAgbmFtZSBJTElLRSAkMSBPUiBcbiAgICAgICAgICBkZXNjcmlwdGlvbiBJTElLRSAkMSBPUiBcbiAgICAgICAgICB2ZXJzaW9uIElMSUtFICQxXG4gICAgICAgIE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQ1xuICAgICAgYCwgW3NlYXJjaFBhdHRlcm5dKTtcblxuICAgICAgcmV0dXJuIHJlc3VsdC5yb3dzLm1hcCgocm93OiBhbnkpID0+ICh7XG4gICAgICAgIGlkOiByb3cuaWQsXG4gICAgICAgIHByb2plY3RJZDogJzEnLFxuICAgICAgICBuYW1lOiByb3cubmFtZSxcbiAgICAgICAgdmVyc2lvbjogcm93LnZlcnNpb24sXG4gICAgICAgIGRlc2NyaXB0aW9uOiByb3cuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgIHN0YXR1czogcm93LnN0YXR1cyxcbiAgICAgICAgc3RhcnRBdDogcm93LnNjaGVkdWxlZF9kYXRlLFxuICAgICAgICBlbmRBdDogcm93LmRlcGxveWVkX2RhdGUsXG4gICAgICAgIG93bmVyczogcm93LmFzc2lnbmVlX25hbWUgPyBbcm93LmFzc2lnbmVlX25hbWVdIDogW10sXG4gICAgICAgIGFzc2lnbmVlX25hbWU6IHJvdy5hc3NpZ25lZV9uYW1lLFxuICAgICAgICB3YXRjaGVyczogW10sXG4gICAgICAgIHRhZ3M6IFtdLFxuICAgICAgICBjcmVhdGVkQnk6ICdzeXN0ZW0nLFxuICAgICAgICB1cGRhdGVkQnk6ICdzeXN0ZW0nLFxuICAgICAgICBjcmVhdGVkQXQ6IHJvdy5jcmVhdGVkX2F0LFxuICAgICAgICB1cGRhdGVkQXQ6IHJvdy51cGRhdGVkX2F0LFxuICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgIGdhdGVDcml0ZXJpYToge1xuICAgICAgICAgICAgbWluUGFzc1JhdGU6IDg1LFxuICAgICAgICAgICAgbWF4RmFpbENyaXRpY2FsOiAwLFxuICAgICAgICAgICAgemVyb0Jsb2NrZXJzOiB0cnVlLFxuICAgICAgICAgICAgY292ZXJhZ2VCeVByaW9yaXR5OiB7XG4gICAgICAgICAgICAgIFAwOiAxMDAsXG4gICAgICAgICAgICAgIFAxOiA5NSxcbiAgICAgICAgICAgICAgUDI6IDkwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBhdXRvU3luY1Njb3BlOiB0cnVlLFxuICAgICAgICAgIGFsbG93UmVvcGVuOiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9KSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+umtOumrOymiCDqsoDsg4kg7Iuk7YyoOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICAvLyDrprTrpqzspogg7Iqk7L2U7ZSEIOyXheuNsOydtO2KuFxuICBhc3luYyB1cGRhdGVTY29wZShyZWxlYXNlSWQ6IHN0cmluZywgc2NvcGU6IFJlbGVhc2VTY29wZSk6IFByb21pc2U8UmVsZWFzZSB8IG51bGw+IHtcbiAgICBjb25zdCByZWxlYXNlID0gYXdhaXQgdGhpcy5maW5kQnlJZChyZWxlYXNlSWQpO1xuICAgIGlmICghcmVsZWFzZSkgcmV0dXJuIG51bGw7XG5cbiAgICAvLyDsi6TsoJzroZzripQgUmVsZWFzZVNjb3BlIOyXlO2LsO2LsOulvCDsl4XrjbDsnbTtirjtlZjripQg66Gc7KeB7J20IO2VhOyalFxuICAgIHJldHVybiB0aGlzLnVwZGF0ZShyZWxlYXNlSWQsIHsgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfSk7XG4gIH1cblxuICAvLyDrprTrpqzspogg7LyA7J207IqkIOy2lOqwgFxuICBhc3luYyBhZGRDYXNlKHJlbGVhc2VJZDogc3RyaW5nLCByZWxlYXNlQ2FzZTogUmVsZWFzZUNhc2UpOiBQcm9taXNlPFJlbGVhc2UgfCBudWxsPiB7XG4gICAgY29uc3QgcmVsZWFzZSA9IGF3YWl0IHRoaXMuZmluZEJ5SWQocmVsZWFzZUlkKTtcbiAgICBpZiAoIXJlbGVhc2UpIHJldHVybiBudWxsO1xuXG4gICAgLy8g7Iuk7KCc66Gc64qUIFJlbGVhc2VDYXNl66W8IOy2lOqwgO2VmOuKlCDroZzsp4HsnbQg7ZWE7JqUXG4gICAgcmV0dXJuIHRoaXMudXBkYXRlKHJlbGVhc2VJZCwgeyB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9KTtcbiAgfVxuXG4gIC8vIOumtOumrOymiCDsvIDsnbTsiqQg7JeF642w7J207Yq4XG4gIGFzeW5jIHVwZGF0ZUNhc2UocmVsZWFzZUlkOiBzdHJpbmcsIGNhc2VJZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPFJlbGVhc2VDYXNlPik6IFByb21pc2U8UmVsZWFzZSB8IG51bGw+IHtcbiAgICBjb25zdCByZWxlYXNlID0gYXdhaXQgdGhpcy5maW5kQnlJZChyZWxlYXNlSWQpO1xuICAgIGlmICghcmVsZWFzZSkgcmV0dXJuIG51bGw7XG5cbiAgICAvLyDsi6TsoJzroZzripQgUmVsZWFzZUNhc2Xrpbwg7JeF642w7J207Yq47ZWY64qUIOuhnOyngeydtCDtlYTsmpRcbiAgICByZXR1cm4gdGhpcy51cGRhdGUocmVsZWFzZUlkLCB7IHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH0pO1xuICB9XG5cbiAgLy8g7Iuk7ZaJIOqysOqzvCDsoIDsnqVcbiAgYXN5bmMgc2F2ZVJ1bihyZWxlYXNlSWQ6IHN0cmluZywgcnVuOiBSdW4pOiBQcm9taXNlPFJlbGVhc2UgfCBudWxsPiB7XG4gICAgY29uc3QgcmVsZWFzZSA9IGF3YWl0IHRoaXMuZmluZEJ5SWQocmVsZWFzZUlkKTtcbiAgICBpZiAoIXJlbGVhc2UpIHJldHVybiBudWxsO1xuXG4gICAgLy8g7Iuk7KCc66Gc64qUIFJ1buydhCDsoIDsnqXtlZjripQg66Gc7KeB7J20IO2VhOyalFxuICAgIHJldHVybiB0aGlzLnVwZGF0ZShyZWxlYXNlSWQsIHsgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfSk7XG4gIH1cblxuICAvLyDqsrDtlagg66eB7YGsIOy2lOqwgFxuICBhc3luYyBhZGREZWZlY3RMaW5rKHJlbGVhc2VJZDogc3RyaW5nLCBkZWZlY3RMaW5rOiBEZWZlY3RMaW5rKTogUHJvbWlzZTxSZWxlYXNlIHwgbnVsbD4ge1xuICAgIGNvbnN0IHJlbGVhc2UgPSBhd2FpdCB0aGlzLmZpbmRCeUlkKHJlbGVhc2VJZCk7XG4gICAgaWYgKCFyZWxlYXNlKSByZXR1cm4gbnVsbDtcblxuICAgIC8vIOyLpOygnOuhnOuKlCBEZWZlY3RMaW5r66W8IOy2lOqwgO2VmOuKlCDroZzsp4HsnbQg7ZWE7JqUXG4gICAgcmV0dXJuIHRoaXMudXBkYXRlKHJlbGVhc2VJZCwgeyB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9KTtcbiAgfVxuXG4gIC8vIO2ZmOqyvSDsoJXrs7Qg7JeF642w7J207Yq4XG4gIGFzeW5jIHVwZGF0ZUVudmlyb25tZW50KHJlbGVhc2VJZDogc3RyaW5nLCBlbnZpcm9ubWVudDogRW52aXJvbm1lbnQpOiBQcm9taXNlPFJlbGVhc2UgfCBudWxsPiB7XG4gICAgY29uc3QgcmVsZWFzZSA9IGF3YWl0IHRoaXMuZmluZEJ5SWQocmVsZWFzZUlkKTtcbiAgICBpZiAoIXJlbGVhc2UpIHJldHVybiBudWxsO1xuXG4gICAgLy8g7Iuk7KCc66Gc64qUIEVudmlyb25tZW5066W8IOyXheuNsOydtO2KuO2VmOuKlCDroZzsp4HsnbQg7ZWE7JqUXG4gICAgcmV0dXJuIHRoaXMudXBkYXRlKHJlbGVhc2VJZCwgeyB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9KTtcbiAgfVxuXG4gIC8vIOqyjOydtO2KuCDquLDspIAg7JeF642w7J207Yq4XG4gIGFzeW5jIHVwZGF0ZUdhdGVDcml0ZXJpYShyZWxlYXNlSWQ6IHN0cmluZywgZ2F0ZUNyaXRlcmlhOiBSZWxlYXNlWydzZXR0aW5ncyddWydnYXRlQ3JpdGVyaWEnXSk6IFByb21pc2U8UmVsZWFzZSB8IG51bGw+IHtcbiAgICBjb25zdCByZWxlYXNlID0gYXdhaXQgdGhpcy5maW5kQnlJZChyZWxlYXNlSWQpO1xuICAgIGlmICghcmVsZWFzZSkgcmV0dXJuIG51bGw7XG5cbiAgICByZXR1cm4gdGhpcy51cGRhdGUocmVsZWFzZUlkLCB7XG4gICAgICBzZXR0aW5nczoge1xuICAgICAgICAuLi5yZWxlYXNlLnNldHRpbmdzLFxuICAgICAgICBnYXRlQ3JpdGVyaWFcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8vIOumtOumrOymiCDthYzsiqTtirgg7LyA7J207IqkIOyhsO2ajFxuICBhc3luYyBnZXRUZXN0Q2FzZXMocmVsZWFzZUlkOiBzdHJpbmcpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZ2V0UGdDbGllbnQgfSA9IGF3YWl0IGltcG9ydCgnLi4vLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvZGF0YWJhc2UvcGdDbGllbnQnKTtcbiAgICAgIGNvbnN0IHBnQ2xpZW50ID0gZ2V0UGdDbGllbnQoKTtcbiAgICAgIFxuICAgICAgaWYgKCFwZ0NsaWVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Bvc3RncmVTUUwg7YG065287J207Ja47Yq46rCAIOy0iOq4sO2ZlOuQmOyngCDslYrslZjsirXri4jri6QuJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIHJlbGVhc2VfdGVzdF9jYXNlcyDthYzsnbTruJTqs7wgdGVzdGNhc2VzIO2FjOydtOu4lOydhCDsobDsnbjtlZjsl6wg66qo65OgIOyDgeyEuCDsoJXrs7Qg7KGw7ZqMXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwZ0NsaWVudC5xdWVyeShgXG4gICAgICAgIFNFTEVDVCBcbiAgICAgICAgICB0Yy5pZCxcbiAgICAgICAgICB0Yy50aXRsZSxcbiAgICAgICAgICB0Yy5wcmVyZXEgYXMgZGVzY3JpcHRpb24sXG4gICAgICAgICAgdGMuc3RlcHMsXG4gICAgICAgICAgdGMuZXhwZWN0ZWQsXG4gICAgICAgICAgdGMucHJpb3JpdHksXG4gICAgICAgICAgdGMuc3RhdHVzLFxuICAgICAgICAgIHRjLmNyZWF0ZWRfYnksXG4gICAgICAgICAgdGMuY3JlYXRlZF9hdCxcbiAgICAgICAgICB0Yy51cGRhdGVkX2F0LFxuICAgICAgICAgIHJ0Yy5zdGF0dXMgYXMgZXhlY3V0aW9uX3N0YXR1cyxcbiAgICAgICAgICBydGMuYXNzaWduZWVfbmFtZSBhcyBhc3NpZ25lZF90byxcbiAgICAgICAgICBydGMuZXhlY3V0ZWRfYXQsXG4gICAgICAgICAgdGMuZm9sZGVyX2lkXG4gICAgICAgIEZST00gdGVzdGNhc2VzIHRjXG4gICAgICAgIElOTkVSIEpPSU4gcmVsZWFzZV90ZXN0X2Nhc2VzIHJ0YyBPTiB0Yy5pZCA9IHJ0Yy50ZXN0X2Nhc2VfaWRcbiAgICAgICAgV0hFUkUgcnRjLnJlbGVhc2VfaWQgPSAkMVxuICAgICAgICBPUkRFUiBCWSB0Yy5pZFxuICAgICAgYCwgW3JlbGVhc2VJZF0pO1xuXG4gICAgICByZXR1cm4gcmVzdWx0LnJvd3MubWFwKChyb3c6IGFueSkgPT4gKHtcbiAgICAgICAgaWQ6IHJvdy5pZCxcbiAgICAgICAgdGl0bGU6IHJvdy50aXRsZSxcbiAgICAgICAgZGVzY3JpcHRpb246IHJvdy5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgc3RlcHM6IHJvdy5zdGVwcyB8fCAnJyxcbiAgICAgICAgZXhwZWN0ZWQ6IHJvdy5leHBlY3RlZCB8fCAnJyxcbiAgICAgICAgcHJpb3JpdHk6IHJvdy5wcmlvcml0eSxcbiAgICAgICAgc3RhdHVzOiByb3cuc3RhdHVzLFxuICAgICAgICBjcmVhdGVkQnk6IHJvdy5jcmVhdGVkX2J5LFxuICAgICAgICBjcmVhdGVkQXQ6IHJvdy5jcmVhdGVkX2F0LFxuICAgICAgICB1cGRhdGVkQXQ6IHJvdy51cGRhdGVkX2F0LFxuICAgICAgICBleGVjdXRpb25TdGF0dXM6IHJvdy5leGVjdXRpb25fc3RhdHVzLFxuICAgICAgICBhc3NpZ25lZFRvOiByb3cuYXNzaWduZWRfdG8sXG4gICAgICAgIGV4ZWN1dGVkQXQ6IHJvdy5leGVjdXRlZF9hdCxcbiAgICAgICAgZXhlY3V0ZWRCeTogJycsIC8vIGV4ZWN1dGVkX2J5IOy7rOufvOydtCDsl4bsnLzrr4DroZwg67mIIOusuOyekOyXtOuhnCDshKTsoJVcbiAgICAgICAgZm9sZGVySWQ6IHJvdy5mb2xkZXJfaWRcbiAgICAgIH0pKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign66a066as7KaIIO2FjOyKpO2KuCDsvIDsnbTsiqQg7KGw7ZqMIOyLpO2MqDonLCBlcnJvcik7XG4gICAgICAvLyDsl5Drn6wg67Cc7IOdIOyLnCDruYgg67Cw7Je0IOuwmO2ZmFxuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIC8vIOumtOumrOymiCDthYzsiqTtirjsvIDsnbTsiqQg7IKt7KCcXG4gIGFzeW5jIGRlbGV0ZVRlc3RDYXNlcyhyZWxlYXNlSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGdldFBnQ2xpZW50IH0gPSBhd2FpdCBpbXBvcnQoJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL2RhdGFiYXNlL3BnQ2xpZW50Jyk7XG4gICAgICBjb25zdCBwZ0NsaWVudCA9IGdldFBnQ2xpZW50KCk7XG4gICAgICBcbiAgICAgIGlmICghcGdDbGllbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQb3N0Z3JlU1FMIO2BtOudvOydtOyWuO2KuOqwgCDstIjquLDtmZTrkJjsp4Ag7JWK7JWY7Iq164uI64ukLicpO1xuICAgICAgfVxuXG4gICAgICAvLyDrprTrpqzspojsl5Ag7Jew6rKw65CcIOuqqOuToCDthYzsiqTtirjsvIDsnbTsiqQg7IKt7KCcXG4gICAgICBhd2FpdCBwZ0NsaWVudC5xdWVyeShgXG4gICAgICAgIERFTEVURSBGUk9NIHJlbGVhc2VfdGVzdF9jYXNlc1xuICAgICAgICBXSEVSRSByZWxlYXNlX2lkID0gJDFcbiAgICAgIGAsIFtyZWxlYXNlSWRdKTtcblxuICAgICAgY29uc29sZS5sb2coYOumtOumrOymiCAke3JlbGVhc2VJZH3snZgg66qo65OgIO2FjOyKpO2KuOy8gOydtOyKpOqwgCDsgq3soJzrkJjsl4jsirXri4jri6QuYCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+umtOumrOymiCDthYzsiqTtirjsvIDsnbTsiqQg7IKt7KCcIOyLpO2MqDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvLyDtirnsoJUg7YWM7Iqk7Yq47LyA7J207Iqk65OkIOyCreygnFxuICBhc3luYyBkZWxldGVTcGVjaWZpY1Rlc3RDYXNlcyhyZWxlYXNlSWQ6IHN0cmluZywgdGVzdENhc2VJZHM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZ2V0UGdDbGllbnQgfSA9IGF3YWl0IGltcG9ydCgnLi4vLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvZGF0YWJhc2UvcGdDbGllbnQnKTtcbiAgICAgIGNvbnN0IHBnQ2xpZW50ID0gZ2V0UGdDbGllbnQoKTtcbiAgICAgIFxuICAgICAgaWYgKCFwZ0NsaWVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Bvc3RncmVTUUwg7YG065287J207Ja47Yq46rCAIOy0iOq4sO2ZlOuQmOyngCDslYrslZjsirXri4jri6QuJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0ZXN0Q2FzZUlkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyDrprTrpqzspojsl5DshJwg7Yq57KCVIO2FjOyKpO2KuOy8gOydtOyKpOuTpCDsgq3soJxcbiAgICAgIC8vIHRlc3RDYXNlSWRz66W8IOygleyImCDrsLDsl7TroZwg67OA7ZmYXG4gICAgICBjb25zdCB0ZXN0Q2FzZUlkc0FzSW50ZWdlcnMgPSB0ZXN0Q2FzZUlkcy5tYXAoaWQgPT4gcGFyc2VJbnQoaWQsIDEwKSk7XG4gICAgICBhd2FpdCBwZ0NsaWVudC5xdWVyeShgXG4gICAgICAgIERFTEVURSBGUk9NIHJlbGVhc2VfdGVzdF9jYXNlc1xuICAgICAgICBXSEVSRSByZWxlYXNlX2lkID0gJDEgQU5EIHRlc3RfY2FzZV9pZCA9IEFOWSgkMjo6aW50ZWdlcltdKVxuICAgICAgYCwgW3JlbGVhc2VJZCwgdGVzdENhc2VJZHNBc0ludGVnZXJzXSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKGDrprTrpqzspoggJHtyZWxlYXNlSWR97JeQ7IScICR7dGVzdENhc2VJZHMubGVuZ3RofeqwnOydmCDthYzsiqTtirjsvIDsnbTsiqTqsIAg7IKt7KCc65CY7JeI7Iq164uI64ukLmApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCftirnsoJUg7YWM7Iqk7Yq47LyA7J207IqkIOyCreygnCDsi6TtjKg6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8g7YWM7Iqk7Yq47LyA7J207IqkIOyDge2DnCDrs4Dqsr1cbiAgYXN5bmMgdXBkYXRlVGVzdENhc2VTdGF0dXMocmVsZWFzZUlkOiBzdHJpbmcsIHRlc3RDYXNlSWQ6IHN0cmluZywgc3RhdHVzOiBzdHJpbmcsIGNvbW1lbnQ/OiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGdldFBnQ2xpZW50IH0gPSBhd2FpdCBpbXBvcnQoJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL2RhdGFiYXNlL3BnQ2xpZW50Jyk7XG4gICAgICBjb25zdCBwZ0NsaWVudCA9IGdldFBnQ2xpZW50KCk7XG4gICAgICBcbiAgICAgIGlmICghcGdDbGllbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQb3N0Z3JlU1FMIO2BtOudvOydtOyWuO2KuOqwgCDstIjquLDtmZTrkJjsp4Ag7JWK7JWY7Iq164uI64ukLicpO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZygnPT09IHVwZGF0ZVRlc3RDYXNlU3RhdHVzIGNhbGxlZCA9PT0nKTtcbiAgICAgIGNvbnNvbGUubG9nKCdQYXJhbWV0ZXJzOicsIHsgcmVsZWFzZUlkLCB0ZXN0Q2FzZUlkLCBzdGF0dXMsIGNvbW1lbnQgfSk7XG4gICAgICBjb25zb2xlLmxvZygnU3RhdHVzIHJlY2VpdmVkIChhbHJlYWR5IG1hcHBlZCk6Jywgc3RhdHVzKTtcblxuICAgICAgLy8gcmVsZWFzZV90ZXN0X2Nhc2VzIO2FjOydtOu4lOyXkOyEnCDsg4Htg5wg7JeF642w7J207Yq4XG4gICAgICBjb25zdCB1cGRhdGVRdWVyeSA9IGBcbiAgICAgICAgVVBEQVRFIHJlbGVhc2VfdGVzdF9jYXNlc1xuICAgICAgICBTRVQgc3RhdHVzID0gJDEsIHVwZGF0ZWRfYXQgPSBDVVJSRU5UX1RJTUVTVEFNUFxuICAgICAgICBXSEVSRSByZWxlYXNlX2lkID0gJDIgQU5EIHRlc3RfY2FzZV9pZCA9ICQzXG4gICAgICAgIFJFVFVSTklORyAqXG4gICAgICBgO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnVXBkYXRlIHF1ZXJ5OicsIHVwZGF0ZVF1ZXJ5KTtcbiAgICAgIGNvbnNvbGUubG9nKCdVcGRhdGUgcGFyYW1ldGVyczonLCBbc3RhdHVzLCByZWxlYXNlSWQsIHRlc3RDYXNlSWRdKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGdDbGllbnQucXVlcnkodXBkYXRlUXVlcnksIFtzdGF0dXMsIHJlbGVhc2VJZCwgdGVzdENhc2VJZF0pO1xuXG4gICAgICBpZiAocmVzdWx0LnJvd3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcign7YWM7Iqk7Yq47LyA7J207Iqk66W8IOywvuydhCDsiJgg7JeG7Iq164uI64ukLicpO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZygnVXBkYXRlIHJlc3VsdDonLCByZXN1bHQucm93c1swXSk7XG5cbiAgICAgIC8vIOyLpO2WiSDquLDroZ0g7LaU6rCAIChleGVjdXRpb25zIO2FjOydtOu4lCkgLSDslYjsoITtlZwgdXBzZXJ0IOyymOumrFxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8g66i87KCAIElOU0VSVCDsi5zrj4RcbiAgICAgICAgY29uc3QgaW5zZXJ0UXVlcnkgPSBgXG4gICAgICAgICAgSU5TRVJUIElOVE8gZXhlY3V0aW9ucyAoXG4gICAgICAgICAgICByZWxlYXNlX2lkLCB0ZXN0Y2FzZV9pZCwgc3RhdHVzLCBleGVjdXRlZF9ieSwgZXhlY3V0ZWRfYXQsIGNvbW1lbnRzLCBjcmVhdGVkX2F0LCB1cGRhdGVkX2F0XG4gICAgICAgICAgKSBWQUxVRVMgKCQxLCAkMiwgJDMsICQ0LCBDVVJSRU5UX1RJTUVTVEFNUCwgJDUsIENVUlJFTlRfVElNRVNUQU1QLCBDVVJSRU5UX1RJTUVTVEFNUClcbiAgICAgICAgYDtcbiAgICAgICAgXG4gICAgICAgIGF3YWl0IHBnQ2xpZW50LnF1ZXJ5KGluc2VydFF1ZXJ5LCBbcmVsZWFzZUlkLCB0ZXN0Q2FzZUlkLCBzdGF0dXMsICdzeXN0ZW0nLCBjb21tZW50IHx8ICcnXSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGDsg4jroZzsmrQg7Iuk7ZaJIOq4sOuhnSDsg53shLE6IHJlbGVhc2VfaWQ9JHtyZWxlYXNlSWR9LCB0ZXN0Y2FzZV9pZD0ke3Rlc3RDYXNlSWR9YCk7XG4gICAgICB9IGNhdGNoIChpbnNlcnRFcnJvcjogYW55KSB7XG4gICAgICAgIC8vIFVOSVFVRSDsoJzslb0g7KGw6rG0IOychOuwmOyduCDqsr3smrAgVVBEQVRFIOyImO2WiVxuICAgICAgICBpZiAoaW5zZXJ0RXJyb3IuY29kZSA9PT0gJzIzNTA1JykgeyAvLyB1bmlxdWVfdmlvbGF0aW9uXG4gICAgICAgICAgY29uc3QgdXBkYXRlUXVlcnkgPSBgXG4gICAgICAgICAgICBVUERBVEUgZXhlY3V0aW9ucyBcbiAgICAgICAgICAgIFNFVCBcbiAgICAgICAgICAgICAgc3RhdHVzID0gJDEsXG4gICAgICAgICAgICAgIGV4ZWN1dGVkX2J5ID0gJDIsXG4gICAgICAgICAgICAgIGV4ZWN1dGVkX2F0ID0gQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgICAgICAgIGNvbW1lbnRzID0gJDMsXG4gICAgICAgICAgICAgIHVwZGF0ZWRfYXQgPSBDVVJSRU5UX1RJTUVTVEFNUFxuICAgICAgICAgICAgV0hFUkUgcmVsZWFzZV9pZCA9ICQ0IEFORCB0ZXN0Y2FzZV9pZCA9ICQ1XG4gICAgICAgICAgYDtcbiAgICAgICAgICBcbiAgICAgICAgICBhd2FpdCBwZ0NsaWVudC5xdWVyeSh1cGRhdGVRdWVyeSwgW3N0YXR1cywgJ3N5c3RlbScsIGNvbW1lbnQgfHwgJycsIHJlbGVhc2VJZCwgdGVzdENhc2VJZF0pO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDquLDsobQg7Iuk7ZaJIOq4sOuhnSDsl4XrjbDsnbTtirg6IHJlbGVhc2VfaWQ9JHtyZWxlYXNlSWR9LCB0ZXN0Y2FzZV9pZD0ke3Rlc3RDYXNlSWR9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgaW5zZXJ0RXJyb3I7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coYD09PSDthYzsiqTtirjsvIDsnbTsiqQgJHt0ZXN0Q2FzZUlkfSDsg4Htg5zqsIAgJHtzdGF0dXN966GcIOuzgOqyveuQmOyXiOyKteuLiOuLpC4gPT09YCk7XG4gICAgICBcbiAgICAgIHJldHVybiByZXN1bHQucm93c1swXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignPT09IO2FjOyKpO2KuOy8gOydtOyKpCDsg4Htg5wg67OA6rK9IOyLpO2MqCA9PT0nKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRldGFpbHM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8g7YWM7Iqk7Yq4IO2PtOuNlCDsobDtmoxcbiAgYXN5bmMgZ2V0VGVzdEZvbGRlcnMoKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGdldFBnQ2xpZW50IH0gPSBhd2FpdCBpbXBvcnQoJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL2RhdGFiYXNlL3BnQ2xpZW50Jyk7XG4gICAgICBjb25zdCBwZ0NsaWVudCA9IGdldFBnQ2xpZW50KCk7XG4gICAgICBcbiAgICAgIGlmICghcGdDbGllbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQb3N0Z3JlU1FMIO2BtOudvOydtOyWuO2KuOqwgCDstIjquLDtmZTrkJjsp4Ag7JWK7JWY7Iq164uI64ukLicpO1xuICAgICAgfVxuICBcbiAgICAgIC8vIGZvbGRlcnMg7YWM7J2067iU6rO8IHRyZWVfbm9kZXMg7YWM7J2067iU7JeQ7IScIO2PtOuNlCDqtazsobDrpbwg6rCA7KC47Jik64qUIOy/vOumrCAo7KSR67O1IOygnOqxsClcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBnQ2xpZW50LnF1ZXJ5KGBcbiAgICAgICAgV0lUSCBSRUNVUlNJVkUgZm9sZGVyc190cmVlIEFTIChcbiAgICAgICAgICAtLSBmb2xkZXJzIO2FjOydtOu4lOydmCDro6jtirgg7Y+0642U65OkXG4gICAgICAgICAgU0VMRUNUIFxuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBwYXJlbnRfaWQsXG4gICAgICAgICAgICBjcmVhdGVkX2J5LFxuICAgICAgICAgICAgY3JlYXRlZF9hdCxcbiAgICAgICAgICAgIHVwZGF0ZWRfYXQsXG4gICAgICAgICAgICAwIGFzIGRlcHRoLFxuICAgICAgICAgICAgQVJSQVlbaWRdIGFzIHBhdGgsXG4gICAgICAgICAgICAnZm9sZGVycycgYXMgc291cmNlX3RhYmxlXG4gICAgICAgICAgRlJPTSBmb2xkZXJzIFxuICAgICAgICAgIFdIRVJFIHBhcmVudF9pZCBJUyBOVUxMXG4gICAgICAgICAgXG4gICAgICAgICAgVU5JT04gQUxMXG4gICAgICAgICAgXG4gICAgICAgICAgLS0gZm9sZGVycyDthYzsnbTruJTsnZgg7ZWY7JyEIO2PtOuNlOuTpFxuICAgICAgICAgIFNFTEVDVCBcbiAgICAgICAgICAgIGYuaWQsXG4gICAgICAgICAgICBmLm5hbWUsXG4gICAgICAgICAgICBmLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgZi5wYXJlbnRfaWQsXG4gICAgICAgICAgICBmLmNyZWF0ZWRfYnksXG4gICAgICAgICAgICBmLmNyZWF0ZWRfYXQsXG4gICAgICAgICAgICBmLnVwZGF0ZWRfYXQsXG4gICAgICAgICAgICBmdC5kZXB0aCArIDEsXG4gICAgICAgICAgICBmdC5wYXRoIHx8IGYuaWQsXG4gICAgICAgICAgICAnZm9sZGVycycgYXMgc291cmNlX3RhYmxlXG4gICAgICAgICAgRlJPTSBmb2xkZXJzIGZcbiAgICAgICAgICBJTk5FUiBKT0lOIGZvbGRlcnNfdHJlZSBmdCBPTiBmLnBhcmVudF9pZCA9IGZ0LmlkXG4gICAgICAgICksXG4gICAgICAgIHRyZWVfbm9kZXNfdHJlZSBBUyAoXG4gICAgICAgICAgLS0gdHJlZV9ub2RlcyDthYzsnbTruJTsnZgg66Oo7Yq4IO2PtOuNlOuTpFxuICAgICAgICAgIFNFTEVDVCBcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICcnIGFzIGRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgcGFyZW50X2lkLFxuICAgICAgICAgICAgY3JlYXRlZF9ieSxcbiAgICAgICAgICAgIGNyZWF0ZWRfYXQsXG4gICAgICAgICAgICB1cGRhdGVkX2F0LFxuICAgICAgICAgICAgMCBhcyBkZXB0aCxcbiAgICAgICAgICAgIEFSUkFZW2lkXSBhcyBwYXRoLFxuICAgICAgICAgICAgJ3RyZWVfbm9kZXMnIGFzIHNvdXJjZV90YWJsZVxuICAgICAgICAgIEZST00gdHJlZV9ub2RlcyBcbiAgICAgICAgICBXSEVSRSB0eXBlID0gJ2ZvbGRlcicgQU5EIHBhcmVudF9pZCBJUyBOVUxMXG4gICAgICAgICAgXG4gICAgICAgICAgVU5JT04gQUxMXG4gICAgICAgICAgXG4gICAgICAgICAgLS0gdHJlZV9ub2RlcyDthYzsnbTruJTsnZgg7ZWY7JyEIO2PtOuNlOuTpFxuICAgICAgICAgIFNFTEVDVCBcbiAgICAgICAgICAgIHRuLmlkLFxuICAgICAgICAgICAgdG4ubmFtZSxcbiAgICAgICAgICAgICcnIGFzIGRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgdG4ucGFyZW50X2lkLFxuICAgICAgICAgICAgdG4uY3JlYXRlZF9ieSxcbiAgICAgICAgICAgIHRuLmNyZWF0ZWRfYXQsXG4gICAgICAgICAgICB0bi51cGRhdGVkX2F0LFxuICAgICAgICAgICAgdG50LmRlcHRoICsgMSxcbiAgICAgICAgICAgIHRudC5wYXRoIHx8IHRuLmlkLFxuICAgICAgICAgICAgJ3RyZWVfbm9kZXMnIGFzIHNvdXJjZV90YWJsZVxuICAgICAgICAgIEZST00gdHJlZV9ub2RlcyB0blxuICAgICAgICAgIElOTkVSIEpPSU4gdHJlZV9ub2Rlc190cmVlIHRudCBPTiB0bi5wYXJlbnRfaWQgPSB0bnQuaWRcbiAgICAgICAgICBXSEVSRSB0bi50eXBlID0gJ2ZvbGRlcidcbiAgICAgICAgKSxcbiAgICAgICAgY29tYmluZWRfZm9sZGVycyBBUyAoXG4gICAgICAgICAgLS0gdHJlZV9ub2RlcyDthYzsnbTruJTsnZgg7Y+0642U65Ok7J2EIOyasOyEoOyLnO2VmOqzoCwg7KSR67O165CY7KeAIOyViuuKlCBmb2xkZXJzIO2FjOydtOu4lOydmCDtj7TrjZTrk6Qg7LaU6rCAXG4gICAgICAgICAgU0VMRUNUICogRlJPTSB0cmVlX25vZGVzX3RyZWVcbiAgICAgICAgICBVTklPTiBBTExcbiAgICAgICAgICBTRUxFQ1QgKiBGUk9NIGZvbGRlcnNfdHJlZSBmdFxuICAgICAgICAgIFdIRVJFIE5PVCBFWElTVFMgKFxuICAgICAgICAgICAgU0VMRUNUIDEgRlJPTSB0cmVlX25vZGVzX3RyZWUgdG50IFdIRVJFIHRudC5pZCA9IGZ0LmlkXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICAgIFNFTEVDVFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgcGFyZW50X2lkLFxuICAgICAgICAgIGNyZWF0ZWRfYnksXG4gICAgICAgICAgY3JlYXRlZF9hdCxcbiAgICAgICAgICB1cGRhdGVkX2F0LFxuICAgICAgICAgIGRlcHRoLFxuICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgc291cmNlX3RhYmxlXG4gICAgICAgIEZST00gY29tYmluZWRfZm9sZGVyc1xuICAgICAgICBPUkRFUiBCWSBwYXRoXG4gICAgICBgKTtcblxuICAgICAgY29uc3QgZm9sZGVycyA9IHJlc3VsdC5yb3dzO1xuXG4gICAgICAvLyDqsIEg7Y+0642U7JeQIOuMgO2VtCDthYzsiqTtirjsvIDsnbTsiqQg6rCc7IiYIOqzhOyCsFxuICAgICAgZm9yIChjb25zdCBmb2xkZXIgb2YgZm9sZGVycykge1xuICAgICAgICBpZiAoZm9sZGVyLnNvdXJjZV90YWJsZSA9PT0gJ2ZvbGRlcnMnKSB7XG4gICAgICAgICAgLy8gZm9sZGVycyDthYzsnbTruJTsnZgg7Y+0642U7J24IOqyveyasCAtIO2VtOuLuSDtj7TrjZTsnZgg7KeB7KCR7KCB7J24IO2FjOyKpO2KuOy8gOydtOyKpOunjCDqs4TsgrBcbiAgICAgICAgICBjb25zdCB0ZXN0Q2FzZUNvdW50UmVzdWx0ID0gYXdhaXQgcGdDbGllbnQucXVlcnkoYFxuICAgICAgICAgICAgU0VMRUNUIENPVU5UKCopIGFzIGNvdW50XG4gICAgICAgICAgICBGUk9NIHRlc3RjYXNlcyBcbiAgICAgICAgICAgIFdIRVJFIGZvbGRlcl9pZCA9ICQxXG4gICAgICAgICAgYCwgW2ZvbGRlci5pZF0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGZvbGRlci50ZXN0Q2FzZUNvdW50ID0gcGFyc2VJbnQodGVzdENhc2VDb3VudFJlc3VsdC5yb3dzWzBdPy5jb3VudCB8fCAnMCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHRyZWVfbm9kZXMg7YWM7J2067iU7J2YIO2PtOuNlOyduCDqsr3smrAgLSDtlbTri7kg7Y+0642U7J2YIOyngeygkeyggeyduCDthYzsiqTtirjsvIDsnbTsiqTrp4wg6rOE7IKwXG4gICAgICAgICAgY29uc3QgdGVzdENhc2VDb3VudFJlc3VsdCA9IGF3YWl0IHBnQ2xpZW50LnF1ZXJ5KGBcbiAgICAgICAgICAgIFNFTEVDVCBcbiAgICAgICAgICAgICAgKFNFTEVDVCBDT1VOVCgqKSBGUk9NIHRyZWVfbm9kZXMgV0hFUkUgdHlwZSA9ICd0ZXN0Y2FzZScgQU5EIHBhcmVudF9pZCA9ICQxKSArXG4gICAgICAgICAgICAgIChTRUxFQ1QgQ09VTlQoKikgRlJPTSB0ZXN0Y2FzZXMgV0hFUkUgZm9sZGVyX2lkID0gJDEpIGFzIGNvdW50XG4gICAgICAgICAgYCwgW2ZvbGRlci5pZF0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGZvbGRlci50ZXN0Q2FzZUNvdW50ID0gcGFyc2VJbnQodGVzdENhc2VDb3VudFJlc3VsdC5yb3dzWzBdPy5jb3VudCB8fCAnMCcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmb2xkZXJzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfthYzsiqTtirgg7Y+0642UIOyhsO2ajCDsi6TtjKg6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8g7Y+0642U67OEIO2FjOyKpO2KuOy8gOydtOyKpCDsobDtmoxcbiAgYXN5bmMgZ2V0Rm9sZGVyVGVzdENhc2VzKGZvbGRlcklkOiBzdHJpbmcpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZ2V0UGdDbGllbnQgfSA9IGF3YWl0IGltcG9ydCgnLi4vLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvZGF0YWJhc2UvcGdDbGllbnQnKTtcbiAgICAgIGNvbnN0IHBnQ2xpZW50ID0gZ2V0UGdDbGllbnQoKTtcbiAgICAgIFxuICAgICAgaWYgKCFwZ0NsaWVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Bvc3RncmVTUUwg7YG065287J207Ja47Yq46rCAIOy0iOq4sO2ZlOuQmOyngCDslYrslZjsirXri4jri6QuJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIOuovOyggCDtlbTri7kg7Y+0642U6rCAIOyWtOuWpCDthYzsnbTruJTsl5Ag7J6I64qU7KeAIO2ZleyduFxuICAgICAgY29uc3QgZm9sZGVyQ2hlY2tSZXN1bHQgPSBhd2FpdCBwZ0NsaWVudC5xdWVyeShgXG4gICAgICAgIFNFTEVDVCAnZm9sZGVycycgYXMgc291cmNlX3RhYmxlIEZST00gZm9sZGVycyBXSEVSRSBpZCA9ICQxXG4gICAgICAgIFVOSU9OIEFMTFxuICAgICAgICBTRUxFQ1QgJ3RyZWVfbm9kZXMnIGFzIHNvdXJjZV90YWJsZSBGUk9NIHRyZWVfbm9kZXMgV0hFUkUgaWQgPSAkMSBBTkQgdHlwZSA9ICdmb2xkZXInXG4gICAgICBgLCBbZm9sZGVySWRdKTtcblxuICAgICAgaWYgKGZvbGRlckNoZWNrUmVzdWx0LnJvd3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc291cmNlVGFibGUgPSBmb2xkZXJDaGVja1Jlc3VsdC5yb3dzWzBdLnNvdXJjZV90YWJsZTtcbiAgICAgIGxldCByZXN1bHQ7XG5cbiAgICAgIGlmIChzb3VyY2VUYWJsZSA9PT0gJ2ZvbGRlcnMnKSB7XG4gICAgICAgIC8vIGZvbGRlcnMg7YWM7J2067iU7J2YIO2PtOuNlOyduCDqsr3smrBcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgcGdDbGllbnQucXVlcnkoYFxuICAgICAgICAgIFNFTEVDVCBcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgICBwcmVyZXEgYXMgZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBwcmlvcml0eSxcbiAgICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICAgIGNyZWF0ZWRfYnksXG4gICAgICAgICAgICBjcmVhdGVkX2F0LFxuICAgICAgICAgICAgdXBkYXRlZF9hdCxcbiAgICAgICAgICAgIGZvbGRlcl9pZCBhcyBmb2xkZXJJZFxuICAgICAgICAgIEZST00gdGVzdGNhc2VzIFxuICAgICAgICAgIFdIRVJFIGZvbGRlcl9pZCA9ICQxXG4gICAgICAgICAgT1JERVIgQlkgc29ydF9vcmRlciwgaWRcbiAgICAgICAgYCwgW2ZvbGRlcklkXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyB0cmVlX25vZGVzIO2FjOydtOu4lOydmCDtj7TrjZTsnbgg6rK97JqwIC0gdGVzdGNhc2VzIO2FjOydtOu4lOyXkOyEnCDsobDtmoxcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgcGdDbGllbnQucXVlcnkoYFxuICAgICAgICAgIFNFTEVDVCBcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgICBwcmVyZXEgYXMgZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBwcmlvcml0eSxcbiAgICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICAgIGNyZWF0ZWRfYnksXG4gICAgICAgICAgICBjcmVhdGVkX2F0LFxuICAgICAgICAgICAgdXBkYXRlZF9hdCxcbiAgICAgICAgICAgIGZvbGRlcl9pZCBhcyBmb2xkZXJJZFxuICAgICAgICAgIEZST00gdGVzdGNhc2VzIFxuICAgICAgICAgIFdIRVJFIGZvbGRlcl9pZCA9ICQxXG4gICAgICAgICAgT1JERVIgQlkgc29ydF9vcmRlciwgaWRcbiAgICAgICAgYCwgW2ZvbGRlcklkXSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQucm93cy5tYXAoKHJvdzogYW55KSA9PiAoe1xuICAgICAgICBpZDogcm93LmlkLFxuICAgICAgICB0aXRsZTogcm93LnRpdGxlLFxuICAgICAgICBkZXNjcmlwdGlvbjogcm93LmRlc2NyaXB0aW9uLFxuICAgICAgICBwcmlvcml0eTogcm93LnByaW9yaXR5LFxuICAgICAgICBzdGF0dXM6IHJvdy5zdGF0dXMsXG4gICAgICAgIGNyZWF0ZWRCeTogcm93LmNyZWF0ZWRfYnksXG4gICAgICAgIGNyZWF0ZWRBdDogcm93LmNyZWF0ZWRfYXQsXG4gICAgICAgIHVwZGF0ZWRBdDogcm93LnVwZGF0ZWRfYXQsXG4gICAgICAgIGZvbGRlcklkOiByb3cuZm9sZGVyaWRcbiAgICAgIH0pKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign7Y+0642UIO2FjOyKpO2KuOy8gOydtOyKpCDsobDtmowg7Iuk7YyoOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICAvLyDrprTrpqzspojsl5Ag7YWM7Iqk7Yq47LyA7J207IqkIOy2lOqwgFxuICBhc3luYyBhZGRUZXN0Q2FzZXNUb1JlbGVhc2UocmVsZWFzZUlkOiBzdHJpbmcsIHRlc3RDYXNlSWRzOiBudW1iZXJbXSk6IFByb21pc2U8YW55PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZ2V0UGdDbGllbnQgfSA9IGF3YWl0IGltcG9ydCgnLi4vLi4vLi4vaW5mcmFzdHJ1Y3R1cmUvZGF0YWJhc2UvcGdDbGllbnQnKTtcbiAgICAgIGNvbnN0IHBnQ2xpZW50ID0gZ2V0UGdDbGllbnQoKTtcbiAgICAgIFxuICAgICAgaWYgKCFwZ0NsaWVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Bvc3RncmVTUUwg7YG065287J207Ja47Yq46rCAIOy0iOq4sO2ZlOuQmOyngCDslYrslZjsirXri4jri6QuJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIO2KuOuenOyereyFmCDsi5zsnpFcbiAgICAgIGF3YWl0IHBnQ2xpZW50LnF1ZXJ5KCdCRUdJTicpO1xuXG4gICAgICBjb25zdCBhZGRlZFRlc3RDYXNlcyA9IFtdO1xuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IHRlc3RDYXNlSWQgb2YgdGVzdENhc2VJZHMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyDrqLzsoIAg7YWM7Iqk7Yq47LyA7J207IqkIOygleuztCDsobDtmoxcbiAgICAgICAgICBjb25zdCB0ZXN0Q2FzZVJlc3VsdCA9IGF3YWl0IHBnQ2xpZW50LnF1ZXJ5KFxuICAgICAgICAgICAgJ1NFTEVDVCBpZCwgdGl0bGUsIHByaW9yaXR5LCBzdGF0dXMgRlJPTSB0ZXN0Y2FzZXMgV0hFUkUgaWQgPSAkMScsXG4gICAgICAgICAgICBbdGVzdENhc2VJZF1cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgaWYgKHRlc3RDYXNlUmVzdWx0LnJvd3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYO2FjOyKpO2KuOy8gOydtOyKpCAke3Rlc3RDYXNlSWR966W8IOywvuydhCDsiJgg7JeG7Iq164uI64ukLmApO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgdGVzdENhc2UgPSB0ZXN0Q2FzZVJlc3VsdC5yb3dzWzBdO1xuXG4gICAgICAgICAgLy8g7J2066+4IOy2lOqwgOuQnCDthYzsiqTtirjsvIDsnbTsiqTsnbjsp4Ag7ZmV7J24XG4gICAgICAgICAgY29uc3QgZXhpc3RpbmdSZXN1bHQgPSBhd2FpdCBwZ0NsaWVudC5xdWVyeShcbiAgICAgICAgICAgICdTRUxFQ1QgaWQgRlJPTSByZWxlYXNlX3Rlc3RfY2FzZXMgV0hFUkUgcmVsZWFzZV9pZCA9ICQxIEFORCB0ZXN0X2Nhc2VfaWQgPSAkMicsXG4gICAgICAgICAgICBbcmVsZWFzZUlkLCB0ZXN0Q2FzZUlkXVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBpZiAoZXhpc3RpbmdSZXN1bHQucm93cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIC8vIOumtOumrOymiOyXkCDthYzsiqTtirjsvIDsnbTsiqQg7LaU6rCAXG4gICAgICAgICAgICBjb25zdCBpbnNlcnRSZXN1bHQgPSBhd2FpdCBwZ0NsaWVudC5xdWVyeShcbiAgICAgICAgICAgICAgYElOU0VSVCBJTlRPIHJlbGVhc2VfdGVzdF9jYXNlcyAocmVsZWFzZV9pZCwgdGVzdF9jYXNlX2lkLCB0ZXN0X2Nhc2VfbmFtZSwgc3RhdHVzLCBjcmVhdGVkX2F0LCB1cGRhdGVkX2F0KVxuICAgICAgICAgICAgICAgVkFMVUVTICgkMSwgJDIsICQzLCAnTk9UX0VYRUNVVEVEJywgQ1VSUkVOVF9USU1FU1RBTVAsIENVUlJFTlRfVElNRVNUQU1QKVxuICAgICAgICAgICAgICAgUkVUVVJOSU5HICpgLFxuICAgICAgICAgICAgICBbcmVsZWFzZUlkLCB0ZXN0Q2FzZUlkLCB0ZXN0Q2FzZS50aXRsZV1cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGFkZGVkVGVzdENhc2VzLnB1c2goe1xuICAgICAgICAgICAgICAuLi5pbnNlcnRSZXN1bHQucm93c1swXSxcbiAgICAgICAgICAgICAgdGVzdENhc2U6IHRlc3RDYXNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8g7J2066+4IOyhtOyerO2VmOuKlCDthYzsiqTtirjsvIDsnbTsiqTrj4Qg7Lm07Jq07Yq47JeQIO2PrO2VqFxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdUZXN0Q2FzZSA9IGV4aXN0aW5nUmVzdWx0LnJvd3NbMF07XG4gICAgICAgICAgICBhZGRlZFRlc3RDYXNlcy5wdXNoKHtcbiAgICAgICAgICAgICAgLi4uZXhpc3RpbmdUZXN0Q2FzZSxcbiAgICAgICAgICAgICAgdGVzdENhc2U6IHRlc3RDYXNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihg7YWM7Iqk7Yq47LyA7J207IqkICR7dGVzdENhc2VJZH0g7LaU6rCAIOyLpO2MqDpgLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8g7Yq4656c7J6t7IWYIOy7pOuwi1xuICAgICAgYXdhaXQgcGdDbGllbnQucXVlcnkoJ0NPTU1JVCcpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBhZGRlZENvdW50OiBhZGRlZFRlc3RDYXNlcy5sZW5ndGgsXG4gICAgICAgIHRlc3RDYXNlczogYWRkZWRUZXN0Q2FzZXNcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+umtOumrOymiOyXkCDthYzsiqTtirjsvIDsnbTsiqQg7LaU6rCAIOyLpO2MqDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvLyDthrXqs4Qg7KCV67O0IOyhsO2ajFxuICBhc3luYyBnZXRTdGF0aXN0aWNzKHJlbGVhc2VJZDogc3RyaW5nKTogUHJvbWlzZTx7XG4gICAgdG90YWxDYXNlczogbnVtYmVyO1xuICAgIHBhc3NlZENhc2VzOiBudW1iZXI7XG4gICAgZmFpbGVkQ2FzZXM6IG51bWJlcjtcbiAgICBibG9ja2VkQ2FzZXM6IG51bWJlcjtcbiAgICBub3RSdW5DYXNlczogbnVtYmVyO1xuICAgIHBhc3NSYXRlOiBudW1iZXI7XG4gICAgcHJvZ3Jlc3M6IG51bWJlcjtcbiAgfSB8IG51bGw+IHtcbiAgICBjb25zdCByZWxlYXNlID0gYXdhaXQgdGhpcy5maW5kQnlJZChyZWxlYXNlSWQpO1xuICAgIGlmICghcmVsZWFzZSkgcmV0dXJuIG51bGw7XG5cbiAgICAvLyDsnoTsi5wg7Ya16rOEIOuNsOydtO2EsCAo7Iuk7KCc66Gc64qUIFJlbGVhc2VDYXNlIOuNsOydtO2EsOulvCDquLDrsJjsnLzroZwg6rOE7IKwKVxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbENhc2VzOiAxMjcsXG4gICAgICBwYXNzZWRDYXNlczogMTA4LFxuICAgICAgZmFpbGVkQ2FzZXM6IDE5LFxuICAgICAgYmxvY2tlZENhc2VzOiAzLFxuICAgICAgbm90UnVuQ2FzZXM6IDE1LFxuICAgICAgcGFzc1JhdGU6IDg1LFxuICAgICAgcHJvZ3Jlc3M6IDg4XG4gICAgfTtcbiAgfVxuXG4gIC8vIOumtOumrOymiCDsi6Ttlokg7Ya16rOEIOyhsO2ajFxuICBhc3luYyBnZXRFeGVjdXRpb25TdGF0cyhyZWxlYXNlSWQ6IHN0cmluZyk6IFByb21pc2U8e1xuICAgIHBsYW5uZWQ6IG51bWJlcjtcbiAgICBleGVjdXRlZDogbnVtYmVyO1xuICAgIHBhc3NlZDogbnVtYmVyO1xuICAgIGZhaWxlZDogbnVtYmVyO1xuICAgIGJsb2NrZWQ6IG51bWJlcjtcbiAgICBza2lwcGVkOiBudW1iZXI7XG4gICAgcGFzc1JhdGU6IG51bWJlcjtcbiAgfT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGdldFBnQ2xpZW50IH0gPSBhd2FpdCBpbXBvcnQoJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL2RhdGFiYXNlL3BnQ2xpZW50Jyk7XG4gICAgICBjb25zdCBwZ0NsaWVudCA9IGdldFBnQ2xpZW50KCk7XG4gICAgICBcbiAgICAgIGlmICghcGdDbGllbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQb3N0Z3JlU1FMIO2BtOudvOydtOyWuO2KuOqwgCDstIjquLDtmZTrkJjsp4Ag7JWK7JWY7Iq164uI64ukLicpO1xuICAgICAgfVxuXG4gICAgICAvLyDrprTrpqzspojsl5Ag7Jew6rKw65CcIO2FjOyKpO2KuOy8gOydtOyKpOuTpOydmCDsi6Ttlokg7IOB7YOc66W8IOyhsO2ajFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGdDbGllbnQucXVlcnkoYFxuICAgICAgICBTRUxFQ1QgXG4gICAgICAgICAgQ09VTlQoKikgYXMgdG90YWwsXG4gICAgICAgICAgQ09VTlQoQ0FTRSBXSEVOIHN0YXR1cyA9ICdQYXNzJyBUSEVOIDEgRU5EKSBhcyBwYXNzZWQsXG4gICAgICAgICAgQ09VTlQoQ0FTRSBXSEVOIHN0YXR1cyA9ICdGYWlsJyBUSEVOIDEgRU5EKSBhcyBmYWlsZWQsXG4gICAgICAgICAgQ09VTlQoQ0FTRSBXSEVOIHN0YXR1cyBJTiAoJ0Jsb2NrJywgJ0Jsb2NrZWQnKSBUSEVOIDEgRU5EKSBhcyBibG9ja2VkLFxuICAgICAgICAgIENPVU5UKENBU0UgV0hFTiBzdGF0dXMgPSAnU2tpcCcgVEhFTiAxIEVORCkgYXMgc2tpcHBlZCxcbiAgICAgICAgICBDT1VOVChDQVNFIFdIRU4gc3RhdHVzID0gJ05PVF9FWEVDVVRFRCcgVEhFTiAxIEVORCkgYXMgbm90UnVuXG4gICAgICAgIEZST00gcmVsZWFzZV90ZXN0X2Nhc2VzXG4gICAgICAgIFdIRVJFIHJlbGVhc2VfaWQgPSAkMTo6dXVpZFxuICAgICAgYCwgW3JlbGVhc2VJZF0pO1xuXG4gICAgICBjb25zdCBzdGF0cyA9IHJlc3VsdC5yb3dzWzBdO1xuICAgICAgY29uc3QgdG90YWwgPSBwYXJzZUludChzdGF0cy50b3RhbCkgfHwgMDtcbiAgICAgIGNvbnN0IHBhc3NlZCA9IHBhcnNlSW50KHN0YXRzLnBhc3NlZCkgfHwgMDtcbiAgICAgIGNvbnN0IGZhaWxlZCA9IHBhcnNlSW50KHN0YXRzLmZhaWxlZCkgfHwgMDtcbiAgICAgIGNvbnN0IGJsb2NrZWQgPSBwYXJzZUludChzdGF0cy5ibG9ja2VkKSB8fCAwO1xuICAgICAgY29uc3Qgc2tpcHBlZCA9IHBhcnNlSW50KHN0YXRzLnNraXBwZWQpIHx8IDA7XG4gICAgICBjb25zdCBub3RSdW4gPSBwYXJzZUludChzdGF0cy5ub3RSdW4pIHx8IDA7XG4gICAgICBjb25zdCBleGVjdXRlZCA9IHRvdGFsIC0gbm90UnVuO1xuICAgICAgY29uc3QgcGFzc1JhdGUgPSBleGVjdXRlZCA+IDAgPyBNYXRoLnJvdW5kKChwYXNzZWQgLyBleGVjdXRlZCkgKiAxMDApIDogMDtcblxuICAgICAgY29uc29sZS5sb2coJz09PSDsi6Ttlokg7Ya16rOEIOqzhOyCsCA9PT0nKTtcbiAgICAgIGNvbnNvbGUubG9nKCdyZWxlYXNlSWQ6JywgcmVsZWFzZUlkKTtcbiAgICAgIGNvbnNvbGUubG9nKCdyYXcgc3RhdHM6Jywgc3RhdHMpO1xuICAgICAgY29uc29sZS5sb2coJ2NhbGN1bGF0ZWQgdmFsdWVzOicsIHtcbiAgICAgICAgdG90YWwsXG4gICAgICAgIHBhc3NlZCxcbiAgICAgICAgZmFpbGVkLFxuICAgICAgICBibG9ja2VkLFxuICAgICAgICBza2lwcGVkLFxuICAgICAgICBub3RSdW4sXG4gICAgICAgIGV4ZWN1dGVkLFxuICAgICAgICBwYXNzUmF0ZVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBsYW5uZWQ6IHRvdGFsLFxuICAgICAgICBleGVjdXRlZCxcbiAgICAgICAgcGFzc2VkLFxuICAgICAgICBmYWlsZWQsXG4gICAgICAgIGJsb2NrZWQsXG4gICAgICAgIHNraXBwZWQsXG4gICAgICAgIHBhc3NSYXRlXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfsi6Ttlokg7Ya16rOEIOyhsO2ajCDsi6TtjKg6JywgZXJyb3IpO1xuICAgICAgXG4gICAgICAvLyDsl5Drn6wg7IucIDDqsJwg67CY7ZmYICjsi6Tsi5zqsIQg64+Z6riw7ZmU66W8IOychO2VtClcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBsYW5uZWQ6IDAsXG4gICAgICAgIGV4ZWN1dGVkOiAwLFxuICAgICAgICBwYXNzZWQ6IDAsXG4gICAgICAgIGZhaWxlZDogMCxcbiAgICAgICAgYmxvY2tlZDogMCxcbiAgICAgICAgc2tpcHBlZDogMCxcbiAgICAgICAgcGFzc1JhdGU6IDBcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8g66a066as7KaIIOyLpO2WiSDthrXqs4Qg7JeF642w7J207Yq4XG4gIGFzeW5jIHVwZGF0ZUV4ZWN1dGlvblN0YXRzKHJlbGVhc2VJZDogc3RyaW5nLCBwbGFubmVkQ291bnQ6IG51bWJlcik6IFByb21pc2U8e1xuICAgIHBsYW5uZWQ6IG51bWJlcjtcbiAgICBleGVjdXRlZDogbnVtYmVyO1xuICAgIHBhc3NlZDogbnVtYmVyO1xuICAgIGZhaWxlZDogbnVtYmVyO1xuICAgIGJsb2NrZWQ6IG51bWJlcjtcbiAgICBza2lwcGVkOiBudW1iZXI7XG4gICAgcGFzc1JhdGU6IG51bWJlcjtcbiAgfT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGdldFBnQ2xpZW50IH0gPSBhd2FpdCBpbXBvcnQoJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL2RhdGFiYXNlL3BnQ2xpZW50Jyk7XG4gICAgICBjb25zdCBwZ0NsaWVudCA9IGdldFBnQ2xpZW50KCk7XG4gICAgICBcbiAgICAgIGlmICghcGdDbGllbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQb3N0Z3JlU1FMIO2BtOudvOydtOyWuO2KuOqwgCDstIjquLDtmZTrkJjsp4Ag7JWK7JWY7Iq164uI64ukLicpO1xuICAgICAgfVxuXG4gICAgICAvLyByZWxlYXNlX3Rlc3RfY2FzZXMg7YWM7J2067iU7JeQ7IScIOyLpO2WiSDsg4Htg5wg7KGw7ZqMXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwZ0NsaWVudC5xdWVyeShgXG4gICAgICAgIFNFTEVDVCBcbiAgICAgICAgICBDT1VOVChDQVNFIFdIRU4gc3RhdHVzID0gJ1Bhc3MnIFRIRU4gMSBFTkQpIGFzIHBhc3NlZCxcbiAgICAgICAgICBDT1VOVChDQVNFIFdIRU4gc3RhdHVzID0gJ0ZhaWwnIFRIRU4gMSBFTkQpIGFzIGZhaWxlZCxcbiAgICAgICAgICBDT1VOVChDQVNFIFdIRU4gc3RhdHVzIElOICgnQmxvY2snLCAnQmxvY2tlZCcpIFRIRU4gMSBFTkQpIGFzIGJsb2NrZWQsXG4gICAgICAgICAgQ09VTlQoQ0FTRSBXSEVOIHN0YXR1cyA9ICdTa2lwJyBUSEVOIDEgRU5EKSBhcyBza2lwcGVkLFxuICAgICAgICAgIENPVU5UKENBU0UgV0hFTiBzdGF0dXMgPSAnTm90IFJ1bicgVEhFTiAxIEVORCkgYXMgbm90UnVuXG4gICAgICAgIEZST00gcmVsZWFzZV90ZXN0X2Nhc2VzXG4gICAgICAgIFdIRVJFIHJlbGVhc2VfaWQgPSAkMVxuICAgICAgYCwgW3JlbGVhc2VJZF0pO1xuXG4gICAgICBjb25zdCBzdGF0cyA9IHJlc3VsdC5yb3dzWzBdO1xuICAgICAgY29uc3QgcGFzc2VkID0gcGFyc2VJbnQoc3RhdHMucGFzc2VkKSB8fCAwO1xuICAgICAgY29uc3QgZmFpbGVkID0gcGFyc2VJbnQoc3RhdHMuZmFpbGVkKSB8fCAwO1xuICAgICAgY29uc3QgYmxvY2tlZCA9IHBhcnNlSW50KHN0YXRzLmJsb2NrZWQpIHx8IDA7XG4gICAgICBjb25zdCBza2lwcGVkID0gcGFyc2VJbnQoc3RhdHMuc2tpcHBlZCkgfHwgMDtcbiAgICAgIGNvbnN0IG5vdFJ1biA9IHBhcnNlSW50KHN0YXRzLm5vdFJ1bikgfHwgMDtcbiAgICAgIGNvbnN0IGV4ZWN1dGVkID0gcGxhbm5lZENvdW50IC0gbm90UnVuO1xuICAgICAgY29uc3QgcGFzc1JhdGUgPSBleGVjdXRlZCA+IDAgPyBNYXRoLnJvdW5kKChwYXNzZWQgLyBleGVjdXRlZCkgKiAxMDApIDogMDtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGxhbm5lZDogcGxhbm5lZENvdW50LFxuICAgICAgICBleGVjdXRlZCxcbiAgICAgICAgcGFzc2VkLFxuICAgICAgICBmYWlsZWQsXG4gICAgICAgIGJsb2NrZWQsXG4gICAgICAgIHNraXBwZWQsXG4gICAgICAgIHBhc3NSYXRlXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfsi6Ttlokg7Ya16rOEIOyXheuNsOydtO2KuCDsi6TtjKg6JywgZXJyb3IpO1xuICAgICAgXG4gICAgICAvLyDsl5Drn6wg7IucIOq4sOuzuOqwkiDrsJjtmZhcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBsYW5uZWQ6IHBsYW5uZWRDb3VudCxcbiAgICAgICAgZXhlY3V0ZWQ6IDAsXG4gICAgICAgIHBhc3NlZDogMCxcbiAgICAgICAgZmFpbGVkOiAwLFxuICAgICAgICBibG9ja2VkOiAwLFxuICAgICAgICBza2lwcGVkOiAwLFxuICAgICAgICBwYXNzUmF0ZTogMFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyDrprTrpqzspojsl5Ag6rCA7KC47JioIO2PtOuNlCDrqqnroZ0g7KGw7ZqMXG4gIGFzeW5jIGdldEltcG9ydGVkRm9sZGVycyhyZWxlYXNlSWQ6IHN0cmluZyk6IFByb21pc2U8YW55W10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBnZXRQZ0NsaWVudCB9ID0gYXdhaXQgaW1wb3J0KCcuLi8uLi8uLi9pbmZyYXN0cnVjdHVyZS9kYXRhYmFzZS9wZ0NsaWVudCcpO1xuICAgICAgY29uc3QgcGdDbGllbnQgPSBnZXRQZ0NsaWVudCgpO1xuICAgICAgXG4gICAgICBpZiAoIXBnQ2xpZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUG9zdGdyZVNRTCDtgbTrnbzsnbTslrjtirjqsIAg7LSI6riw7ZmU65CY7KeAIOyViuyVmOyKteuLiOuLpC4nKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGdDbGllbnQucXVlcnkoYFxuICAgICAgICBTRUxFQ1QgXG4gICAgICAgICAgaWQsXG4gICAgICAgICAgcmVsZWFzZV9pZCxcbiAgICAgICAgICBmb2xkZXJfaWQsXG4gICAgICAgICAgZm9sZGVyX25hbWUsXG4gICAgICAgICAgcGFyZW50X2lkLFxuICAgICAgICAgIHRlc3RfY2FzZV9jb3VudCxcbiAgICAgICAgICBjcmVhdGVkX2F0LFxuICAgICAgICAgIHVwZGF0ZWRfYXRcbiAgICAgICAgRlJPTSByZWxlYXNlX2ltcG9ydGVkX2ZvbGRlcnNcbiAgICAgICAgV0hFUkUgcmVsZWFzZV9pZCA9ICQxXG4gICAgICAgIE9SREVSIEJZIGNyZWF0ZWRfYXQgQVNDXG4gICAgICBgLCBbcmVsZWFzZUlkXSk7XG5cbiAgICAgIHJldHVybiByZXN1bHQucm93cy5tYXAoKHJvdzogYW55KSA9PiAoe1xuICAgICAgICBpZDogcm93LmlkLFxuICAgICAgICByZWxlYXNlSWQ6IHJvdy5yZWxlYXNlX2lkLFxuICAgICAgICBmb2xkZXJJZDogcm93LmZvbGRlcl9pZCxcbiAgICAgICAgbmFtZTogcm93LmZvbGRlcl9uYW1lLFxuICAgICAgICBwYXJlbnRJZDogcm93LnBhcmVudF9pZCxcbiAgICAgICAgdGVzdENhc2VDb3VudDogcm93LnRlc3RfY2FzZV9jb3VudCxcbiAgICAgICAgY3JlYXRlZEF0OiByb3cuY3JlYXRlZF9hdCxcbiAgICAgICAgdXBkYXRlZEF0OiByb3cudXBkYXRlZF9hdFxuICAgICAgfSkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfqsIDsoLjsmKgg7Y+0642UIOuqqeuhnSDsobDtmowg7Iuk7YyoOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICAvLyDrprTrpqzspojsl5Ag7Y+0642UIOy2lOqwgFxuICBhc3luYyBhZGRJbXBvcnRlZEZvbGRlcnMocmVsZWFzZUlkOiBzdHJpbmcsIGZvbGRlcnM6IGFueVtdKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGdldFBnQ2xpZW50IH0gPSBhd2FpdCBpbXBvcnQoJy4uLy4uLy4uL2luZnJhc3RydWN0dXJlL2RhdGFiYXNlL3BnQ2xpZW50Jyk7XG4gICAgICBjb25zdCBwZ0NsaWVudCA9IGdldFBnQ2xpZW50KCk7XG4gICAgICBcbiAgICAgIGlmICghcGdDbGllbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQb3N0Z3JlU1FMIO2BtOudvOydtOyWuO2KuOqwgCDstIjquLDtmZTrkJjsp4Ag7JWK7JWY7Iq164uI64ukLicpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBhZGRlZEZvbGRlcnMgPSBbXTtcblxuICAgICAgZm9yIChjb25zdCBmb2xkZXIgb2YgZm9sZGVycykge1xuICAgICAgICAvLyDspJHrs7Ug7LK07YGsXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nUmVzdWx0ID0gYXdhaXQgcGdDbGllbnQucXVlcnkoYFxuICAgICAgICAgIFNFTEVDVCBpZCBGUk9NIHJlbGVhc2VfaW1wb3J0ZWRfZm9sZGVycyBcbiAgICAgICAgICBXSEVSRSByZWxlYXNlX2lkID0gJDEgQU5EIGZvbGRlcl9pZCA9ICQyXG4gICAgICAgIGAsIFtyZWxlYXNlSWQsIGZvbGRlci5mb2xkZXJfaWRdKTtcblxuICAgICAgICBpZiAoZXhpc3RpbmdSZXN1bHQucm93cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAvLyDsg4gg7Y+0642UIOy2lOqwgFxuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBnQ2xpZW50LnF1ZXJ5KGBcbiAgICAgICAgICAgIElOU0VSVCBJTlRPIHJlbGVhc2VfaW1wb3J0ZWRfZm9sZGVycyBcbiAgICAgICAgICAgIChyZWxlYXNlX2lkLCBmb2xkZXJfaWQsIGZvbGRlcl9uYW1lLCBwYXJlbnRfaWQsIHRlc3RfY2FzZV9jb3VudClcbiAgICAgICAgICAgIFZBTFVFUyAoJDEsICQyLCAkMywgJDQsICQ1KVxuICAgICAgICAgICAgUkVUVVJOSU5HICpcbiAgICAgICAgICBgLCBbXG4gICAgICAgICAgICByZWxlYXNlSWQsXG4gICAgICAgICAgICBmb2xkZXIuZm9sZGVyX2lkLFxuICAgICAgICAgICAgZm9sZGVyLmZvbGRlcl9uYW1lLFxuICAgICAgICAgICAgZm9sZGVyLnBhcmVudF9pZCB8fCBudWxsLFxuICAgICAgICAgICAgZm9sZGVyLnRlc3RfY2FzZV9jb3VudCB8fCAwXG4gICAgICAgICAgXSk7XG5cbiAgICAgICAgICBhZGRlZEZvbGRlcnMucHVzaChyZXN1bHQucm93c1swXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFkZGVkRm9sZGVycztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign7Y+0642UIOy2lOqwgCDsi6TtjKg6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8g66a066as7KaI7JeQ7IScIO2PtOuNlCDsoJzqsbBcbiAgYXN5bmMgcmVtb3ZlSW1wb3J0ZWRGb2xkZXIocmVsZWFzZUlkOiBzdHJpbmcsIGZvbGRlcklkOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBnZXRQZ0NsaWVudCB9ID0gYXdhaXQgaW1wb3J0KCcuLi8uLi8uLi9pbmZyYXN0cnVjdHVyZS9kYXRhYmFzZS9wZ0NsaWVudCcpO1xuICAgICAgY29uc3QgcGdDbGllbnQgPSBnZXRQZ0NsaWVudCgpO1xuICAgICAgXG4gICAgICBpZiAoIXBnQ2xpZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUG9zdGdyZVNRTCDtgbTrnbzsnbTslrjtirjqsIAg7LSI6riw7ZmU65CY7KeAIOyViuyVmOyKteuLiOuLpC4nKTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgcGdDbGllbnQucXVlcnkoYFxuICAgICAgICBERUxFVEUgRlJPTSByZWxlYXNlX2ltcG9ydGVkX2ZvbGRlcnMgXG4gICAgICAgIFdIRVJFIHJlbGVhc2VfaWQgPSAkMSBBTkQgZm9sZGVyX2lkID0gJDJcbiAgICAgIGAsIFtyZWxlYXNlSWQsIGZvbGRlcklkXSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign7Y+0642UIOygnOqxsCDsi6TtjKg6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8g66a066as7KaIIOyCreygnFxuICBhc3luYyBkZWxldGVSZWxlYXNlKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBnZXRQZ0NsaWVudCB9ID0gYXdhaXQgaW1wb3J0KCcuLi8uLi8uLi9pbmZyYXN0cnVjdHVyZS9kYXRhYmFzZS9wZ0NsaWVudCcpO1xuICAgICAgY29uc3QgcGdDbGllbnQgPSBnZXRQZ0NsaWVudCgpO1xuICAgICAgXG4gICAgICBpZiAoIXBnQ2xpZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUG9zdGdyZVNRTCDtgbTrnbzsnbTslrjtirjqsIAg7LSI6riw7ZmU65CY7KeAIOyViuyVmOyKteuLiOuLpC4nKTtcbiAgICAgIH1cblxuICAgICAgLy8g66a066as7KaI7JmAIOq0gOugqOuQnCDrjbDsnbTthLDrk6TsnYQg66i87KCAIOyCreygnCAo7KG07J6s7ZWY64qUIO2FjOydtOu4lOunjClcbiAgICAgIGF3YWl0IHBnQ2xpZW50LnF1ZXJ5KCdERUxFVEUgRlJPTSByZWxlYXNlX2ltcG9ydGVkX2ZvbGRlcnMgV0hFUkUgcmVsZWFzZV9pZCA9ICQxJywgW2lkXSk7XG4gICAgICBhd2FpdCBwZ0NsaWVudC5xdWVyeSgnREVMRVRFIEZST00gcmVsZWFzZV90ZXN0X2Nhc2VzIFdIRVJFIHJlbGVhc2VfaWQgPSAkMScsIFtpZF0pO1xuICAgICAgXG4gICAgICAvLyDrp4jsp4Drp4nsnLzroZwg66a066as7KaIIOyCreygnFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGdDbGllbnQucXVlcnkoJ0RFTEVURSBGUk9NIHJlbGVhc2VzIFdIRVJFIGlkID0gJDEnLCBbaWRdKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3VsdC5yb3dDb3VudCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+yCreygnO2VoCDrprTrpqzspojrpbwg7LC+7J2EIOyImCDsl4bsirXri4jri6QuJyk7XG4gICAgICB9XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign66a066as7KaIIOyCreygnCDsi6TtjKg6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8g7LSI6riwIOuNsOydtO2EsCDroZzrk5wgKOqwnOuwnOyaqSlcbiAgYXN5bmMgbG9hZEluaXRpYWxEYXRhKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIOuNsOydtO2EsOuyoOydtOyKpOyXkCDsnbTrr7gg642w7J207YSw6rCAIOyeiOuKlOyngCDtmZXsnbhcbiAgICBjb25zdCBleGlzdGluZ1JlbGVhc2VzID0gYXdhaXQgdGhpcy5maW5kQWxsKCk7XG4gICAgaWYgKGV4aXN0aW5nUmVsZWFzZXMubGVuZ3RoID4gMCkgcmV0dXJuOyAvLyDsnbTrr7gg642w7J207YSw6rCAIOyeiOycvOuptCDsiqTtgrVcblxuICAgIGNvbnN0IGluaXRpYWxSZWxlYXNlczogT21pdDxSZWxlYXNlLCAnaWQnIHwgJ2NyZWF0ZWRBdCcgfCAndXBkYXRlZEF0Jz5bXSA9IFtcbiAgICAgIHtcbiAgICAgICAgcHJvamVjdElkOiAnMScsXG4gICAgICAgIG5hbWU6ICcyMDI0LjEyLjAg66a066as7KaIJyxcbiAgICAgICAgdmVyc2lvbjogJzIwMjQuMTIuMCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnMjAyNOuFhCAxMuyblCDsoJXquLAg66a066as7KaIJyxcbiAgICAgICAgc3RhdHVzOiAnQWN0aXZlJyxcbiAgICAgICAgc3RhcnRBdDogJzIwMjQtMTItMDEnLFxuICAgICAgICBlbmRBdDogJzIwMjQtMTItMTUnLFxuICAgICAgICBvd25lcnM6IFsndXNlcjEnXSxcbiAgICAgICAgd2F0Y2hlcnM6IFsndXNlcjInLCAndXNlcjMnXSxcbiAgICAgICAgdGFnczogWyfsoJXquLAnLCAn7KSR7JqUJ10sXG4gICAgICAgIGNyZWF0ZWRCeTogJ3VzZXIxJyxcbiAgICAgICAgdXBkYXRlZEJ5OiAndXNlcjEnLFxuICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgIGdhdGVDcml0ZXJpYToge1xuICAgICAgICAgICAgbWluUGFzc1JhdGU6IDg1LFxuICAgICAgICAgICAgbWF4RmFpbENyaXRpY2FsOiAwLFxuICAgICAgICAgICAgemVyb0Jsb2NrZXJzOiB0cnVlLFxuICAgICAgICAgICAgY292ZXJhZ2VCeVByaW9yaXR5OiB7XG4gICAgICAgICAgICAgIFAwOiAxMDAsXG4gICAgICAgICAgICAgIFAxOiA5NSxcbiAgICAgICAgICAgICAgUDI6IDkwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBhdXRvU3luY1Njb3BlOiB0cnVlLFxuICAgICAgICAgIGFsbG93UmVvcGVuOiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBwcm9qZWN0SWQ6ICcxJyxcbiAgICAgICAgbmFtZTogJzIwMjQuMTEuMSDtlavtlL3siqQnLFxuICAgICAgICB2ZXJzaW9uOiAnMjAyNC4xMS4xJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICfquLTquIkg67KE6re4IOyImOyglSDrprTrpqzspognLFxuICAgICAgICBzdGF0dXM6ICdDb21wbGV0ZScsXG4gICAgICAgIHN0YXJ0QXQ6ICcyMDI0LTExLTE1JyxcbiAgICAgICAgZW5kQXQ6ICcyMDI0LTExLTIwJyxcbiAgICAgICAgb3duZXJzOiBbJ3VzZXIyJ10sXG4gICAgICAgIHdhdGNoZXJzOiBbJ3VzZXIxJ10sXG4gICAgICAgIHRhZ3M6IFsn7ZWr7ZS97IqkJywgJ+q4tOq4iSddLFxuICAgICAgICBjcmVhdGVkQnk6ICd1c2VyMicsXG4gICAgICAgIHVwZGF0ZWRCeTogJ3VzZXIyJyxcbiAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICBnYXRlQ3JpdGVyaWE6IHtcbiAgICAgICAgICAgIG1pblBhc3NSYXRlOiA5MCxcbiAgICAgICAgICAgIG1heEZhaWxDcml0aWNhbDogMCxcbiAgICAgICAgICAgIHplcm9CbG9ja2VyczogdHJ1ZSxcbiAgICAgICAgICAgIGNvdmVyYWdlQnlQcmlvcml0eToge1xuICAgICAgICAgICAgICBQMDogMTAwLFxuICAgICAgICAgICAgICBQMTogMTAwLFxuICAgICAgICAgICAgICBQMjogOTVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGF1dG9TeW5jU2NvcGU6IGZhbHNlLFxuICAgICAgICAgIGFsbG93UmVvcGVuOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBdO1xuXG4gICAgZm9yIChjb25zdCByZWxlYXNlRGF0YSBvZiBpbml0aWFsUmVsZWFzZXMpIHtcbiAgICAgIGF3YWl0IHRoaXMuY3JlYXRlKHJlbGVhc2VEYXRhKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHJlbGVhc2VSZXBvc2l0b3J5ID0gbmV3IFJlbGVhc2VSZXBvc2l0b3J5KCk7Il0sInZlcnNpb24iOjN9