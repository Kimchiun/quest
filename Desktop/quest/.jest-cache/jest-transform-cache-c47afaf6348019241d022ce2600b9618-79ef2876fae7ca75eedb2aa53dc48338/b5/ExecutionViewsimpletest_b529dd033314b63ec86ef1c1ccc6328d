4b3d28703ceb67824ac8a2ee8c936cf5
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
// Mock API hooks
jest.mock('../src/renderer/services/api', () => ({
    api: {
        reducerPath: 'api',
        reducer: (state = {}, action) => state,
        middleware: () => (next) => (action) => next(action),
    },
    useGetReleaseTestCasesQuery: jest.fn(() => ({
        data: { data: [] },
        isLoading: false,
        error: null,
        refetch: jest.fn(),
    })),
    useUpdateReleaseExecutionStatsMutation: jest.fn(() => [jest.fn()]),
    useGetReleaseExecutionStatsQuery: jest.fn(() => ({
        data: { data: { total: 0, passed: 0, failed: 0, blocked: 0, skipped: 0, planned: 0, passRate: 0 } },
        isLoading: false,
        error: null,
        refetch: jest.fn(),
    })),
    useUpdateTestCaseStatusMutation: jest.fn(() => [jest.fn()]),
    useGetTestFoldersQuery: jest.fn(() => ({ data: [] })),
    useGetImportedFoldersQuery: jest.fn(() => ({ data: [], refetch: jest.fn() })),
    useAddImportedFoldersMutation: jest.fn(() => [jest.fn()]),
    useRemoveImportedFolderMutation: jest.fn(() => [jest.fn()]),
}));
const react_1 = require("@testing-library/react");
const react_redux_1 = require("react-redux");
const toolkit_1 = require("@reduxjs/toolkit");
// Mock ExecutionView component
const MockExecutionView = () => {
    return ((0, jsx_runtime_1.jsxs)("div", { "data-testid": "execution-view", children: [(0, jsx_runtime_1.jsx)("h1", { children: "Execution View" }), (0, jsx_runtime_1.jsxs)("div", { "data-testid": "test-cases-container", children: [(0, jsx_runtime_1.jsx)("div", { "data-testid": "test-case-1", children: "Test Case 1" }), (0, jsx_runtime_1.jsx)("div", { "data-testid": "test-case-2", children: "Test Case 2" })] }), (0, jsx_runtime_1.jsx)("div", { "data-testid": "status-dropdown", children: (0, jsx_runtime_1.jsx)("button", { "data-testid": "status-button", children: "Inactive" }) })] }));
};
// Mock store
const createMockStore = () => {
    return (0, toolkit_1.configureStore)({
        reducer: {
            api: (state = {}, action) => state,
        },
        middleware: (getDefaultMiddleware) => getDefaultMiddleware(),
    });
};
describe('ExecutionView Component (Simple)', () => {
    let mockStore;
    beforeEach(() => {
        mockStore = createMockStore();
        jest.clearAllMocks();
    });
    const renderExecutionView = () => {
        return (0, react_1.render)((0, jsx_runtime_1.jsx)(react_redux_1.Provider, { store: mockStore, children: (0, jsx_runtime_1.jsx)(MockExecutionView, {}) }));
    };
    describe('기본 렌더링', () => {
        it('컴포넌트가 정상적으로 렌더링되어야 한다', () => {
            renderExecutionView();
            expect(react_1.screen.getByTestId('execution-view')).toBeInTheDocument();
            expect(react_1.screen.getByText('Execution View')).toBeInTheDocument();
        });
        it('테스트케이스 목록이 표시되어야 한다', () => {
            renderExecutionView();
            expect(react_1.screen.getByTestId('test-cases-container')).toBeInTheDocument();
            expect(react_1.screen.getByTestId('test-case-1')).toBeInTheDocument();
            expect(react_1.screen.getByTestId('test-case-2')).toBeInTheDocument();
        });
        it('상태 드롭다운이 표시되어야 한다', () => {
            renderExecutionView();
            expect(react_1.screen.getByTestId('status-dropdown')).toBeInTheDocument();
            expect(react_1.screen.getByTestId('status-button')).toBeInTheDocument();
            expect(react_1.screen.getByText('Inactive')).toBeInTheDocument();
        });
    });
    describe('API 통합', () => {
        it('API 훅들이 호출되어야 한다', () => {
            const { useGetReleaseTestCasesQuery, useGetReleaseExecutionStatsQuery } = require('../src/renderer/services/api');
            renderExecutionView();
            expect(useGetReleaseTestCasesQuery).toHaveBeenCalled();
            expect(useGetReleaseExecutionStatsQuery).toHaveBeenCalled();
        });
    });
    describe('상태 관리', () => {
        it('Redux store가 정상적으로 설정되어야 한다', () => {
            renderExecutionView();
            // Provider가 정상적으로 렌더링되었는지 확인
            expect(react_1.screen.getByTestId('execution-view')).toBeInTheDocument();
        });
    });
});
// API/DB 중심 동작 테스트
describe('API/DB 중심 동작', () => {
    it('API 데이터를 우선적으로 사용해야 한다', () => {
        const { useGetReleaseTestCasesQuery } = require('../src/renderer/services/api');
        // API 데이터가 있는 경우
        useGetReleaseTestCasesQuery.mockReturnValue({
            data: {
                data: [
                    { id: '1', title: 'API Test Case 1', status: 'Pass' },
                    { id: '2', title: 'API Test Case 2', status: 'Fail' }
                ]
            },
            isLoading: false,
            error: null,
            refetch: jest.fn(),
        });
        (0, react_1.render)((0, jsx_runtime_1.jsx)(react_redux_1.Provider, { store: createMockStore(), children: (0, jsx_runtime_1.jsx)(MockExecutionView, {}) }));
        // API 데이터가 우선적으로 사용되는지 확인
        expect(useGetReleaseTestCasesQuery).toHaveBeenCalled();
    });
    it('API 에러 시 적절한 처리가 되어야 한다', () => {
        const { useGetReleaseTestCasesQuery } = require('../src/renderer/services/api');
        // API 에러 시뮬레이션
        useGetReleaseTestCasesQuery.mockReturnValue({
            data: undefined,
            isLoading: false,
            error: { message: 'API Error' },
            refetch: jest.fn(),
        });
        (0, react_1.render)((0, jsx_runtime_1.jsx)(react_redux_1.Provider, { store: createMockStore(), children: (0, jsx_runtime_1.jsx)(MockExecutionView, {}) }));
        // 에러 상태에서도 컴포넌트가 렌더링되는지 확인
        expect(react_1.screen.getByTestId('execution-view')).toBeInTheDocument();
    });
});
// 실시간 동기화 테스트
describe('실시간 동기화', () => {
    it('폴링 설정이 올바르게 되어야 한다', () => {
        const { useGetReleaseTestCasesQuery } = require('../src/renderer/services/api');
        (0, react_1.render)((0, jsx_runtime_1.jsx)(react_redux_1.Provider, { store: createMockStore(), children: (0, jsx_runtime_1.jsx)(MockExecutionView, {}) }));
        // 폴링 설정 확인 (실제로는 RTK Query가 내부적으로 처리)
        expect(useGetReleaseTestCasesQuery).toHaveBeenCalled();
    });
});
// 에러 처리 테스트
describe('에러 처리', () => {
    it('API 에러 시 컴포넌트가 계속 렌더링되어야 한다', () => {
        const { useGetReleaseTestCasesQuery } = require('../src/renderer/services/api');
        // API 에러 시뮬레이션
        useGetReleaseTestCasesQuery.mockReturnValue({
            data: undefined,
            isLoading: false,
            error: { message: 'Network Error' },
            refetch: jest.fn(),
        });
        (0, react_1.render)((0, jsx_runtime_1.jsx)(react_redux_1.Provider, { store: createMockStore(), children: (0, jsx_runtime_1.jsx)(MockExecutionView, {}) }));
        // 에러 상태에서도 컴포넌트가 정상적으로 렌더링되는지 확인
        expect(react_1.screen.getByTestId('execution-view')).toBeInTheDocument();
        expect(react_1.screen.getByText('Execution View')).toBeInTheDocument();
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzLzNpLWExLTIwMjEtMDE3L0RvY3VtZW50cy9xdWVzdC9EZXNrdG9wL3F1ZXN0L3Rlc3RzL0V4ZWN1dGlvblZpZXcuc2ltcGxlLnRlc3QudHN4IiwibWFwcGluZ3MiOiI7OztBQUtBLGlCQUFpQjtBQUNqQixJQUFJLENBQUMsSUFBSSxDQUFDLDhCQUE4QixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDL0MsR0FBRyxFQUFFO1FBQ0gsV0FBVyxFQUFFLEtBQUs7UUFDbEIsT0FBTyxFQUFFLENBQUMsS0FBSyxHQUFHLEVBQUUsRUFBRSxNQUFXLEVBQUUsRUFBRSxDQUFDLEtBQUs7UUFDM0MsVUFBVSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsSUFBUyxFQUFFLEVBQUUsQ0FBQyxDQUFDLE1BQVcsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztLQUMvRDtJQUNELDJCQUEyQixFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztRQUMxQyxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFO1FBQ2xCLFNBQVMsRUFBRSxLQUFLO1FBQ2hCLEtBQUssRUFBRSxJQUFJO1FBQ1gsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7S0FDbkIsQ0FBQyxDQUFDO0lBQ0gsc0NBQXNDLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ2xFLGdDQUFnQyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztRQUMvQyxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxF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QkFBOEIsQ0FBQyxDQUFDO1FBRWhGLGVBQWU7UUFDZCwyQkFBeUMsQ0FBQyxlQUFlLENBQUM7WUFDekQsSUFBSSxFQUFFLFNBQVM7WUFDZixTQUFTLEVBQUUsS0FBSztZQUNoQixLQUFLLEVBQUUsRUFBRSxPQUFPLEVBQUUsZUFBZSxFQUFFO1lBQ25DLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1NBQ25CLENBQUMsQ0FBQztRQUVILElBQUEsY0FBTSxFQUNKLHVCQUFDLHNCQUFRLElBQUMsS0FBSyxFQUFFLGVBQWUsRUFBRSxZQUNoQyx1QkFBQyxpQkFBaUIsS0FBRyxHQUNaLENBQ1osQ0FBQztRQUVGLGlDQUFpQztRQUNqQyxNQUFNLENBQUMsY0FBTSxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUNqRSxNQUFNLENBQUMsY0FBTSxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztJQUNqRSxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy8zaS1hMS0yMDIxLTAxNy9Eb2N1bWVudHMvcXVlc3QvRGVza3RvcC9xdWVzdC90ZXN0cy9FeGVjdXRpb25WaWV3LnNpbXBsZS50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4gfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IFByb3ZpZGVyIH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IHsgY29uZmlndXJlU3RvcmUgfSBmcm9tICdAcmVkdXhqcy90b29sa2l0JztcblxuLy8gTW9jayBBUEkgaG9va3Ncbmplc3QubW9jaygnLi4vc3JjL3JlbmRlcmVyL3NlcnZpY2VzL2FwaScsICgpID0+ICh7XG4gIGFwaToge1xuICAgIHJlZHVjZXJQYXRoOiAnYXBpJyxcbiAgICByZWR1Y2VyOiAoc3RhdGUgPSB7fSwgYWN0aW9uOiBhbnkpID0+IHN0YXRlLFxuICAgIG1pZGRsZXdhcmU6ICgpID0+IChuZXh0OiBhbnkpID0+IChhY3Rpb246IGFueSkgPT4gbmV4dChhY3Rpb24pLFxuICB9LFxuICB1c2VHZXRSZWxlYXNlVGVzdENhc2VzUXVlcnk6IGplc3QuZm4oKCkgPT4gKHtcbiAgICBkYXRhOiB7IGRhdGE6IFtdIH0sXG4gICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICBlcnJvcjogbnVsbCxcbiAgICByZWZldGNoOiBqZXN0LmZuKCksXG4gIH0pKSxcbiAgdXNlVXBkYXRlUmVsZWFzZUV4ZWN1dGlvblN0YXRzTXV0YXRpb246IGplc3QuZm4oKCkgPT4gW2plc3QuZm4oKV0pLFxuICB1c2VHZXRSZWxlYXNlRXhlY3V0aW9uU3RhdHNRdWVyeTogamVzdC5mbigoKSA9PiAoe1xuICAgIGRhdGE6IHsgZGF0YTogeyB0b3RhbDogMCwgcGFzc2VkOiAwLCBmYWlsZWQ6IDAsIGJsb2NrZWQ6IDAsIHNraXBwZWQ6IDAsIHBsYW5uZWQ6IDAsIHBhc3NSYXRlOiAwIH0gfSxcbiAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgIGVycm9yOiBudWxsLFxuICAgIHJlZmV0Y2g6IGplc3QuZm4oKSxcbiAgfSkpLFxuICB1c2VVcGRhdGVUZXN0Q2FzZVN0YXR1c011dGF0aW9uOiBqZXN0LmZuKCgpID0+IFtqZXN0LmZuKCldKSxcbiAgdXNlR2V0VGVzdEZvbGRlcnNRdWVyeTogamVzdC5mbigoKSA9PiAoeyBkYXRhOiBbXSB9KSksXG4gIHVzZUdldEltcG9ydGVkRm9sZGVyc1F1ZXJ5OiBqZXN0LmZuKCgpID0+ICh7IGRhdGE6IFtdLCByZWZldGNoOiBqZXN0LmZuKCkgfSkpLFxuICB1c2VBZGRJbXBvcnRlZEZvbGRlcnNNdXRhdGlvbjogamVzdC5mbigoKSA9PiBbamVzdC5mbigpXSksXG4gIHVzZVJlbW92ZUltcG9ydGVkRm9sZGVyTXV0YXRpb246IGplc3QuZm4oKCkgPT4gW2plc3QuZm4oKV0pLFxufSkpO1xuXG4vLyBNb2NrIEV4ZWN1dGlvblZpZXcgY29tcG9uZW50XG5jb25zdCBNb2NrRXhlY3V0aW9uVmlldyA9ICgpID0+IHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGRhdGEtdGVzdGlkPVwiZXhlY3V0aW9uLXZpZXdcIj5cbiAgICAgIDxoMT5FeGVjdXRpb24gVmlldzwvaDE+XG4gICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwidGVzdC1jYXNlcy1jb250YWluZXJcIj5cbiAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cInRlc3QtY2FzZS0xXCI+VGVzdCBDYXNlIDE8L2Rpdj5cbiAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cInRlc3QtY2FzZS0yXCI+VGVzdCBDYXNlIDI8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cInN0YXR1cy1kcm9wZG93blwiPlxuICAgICAgICA8YnV0dG9uIGRhdGEtdGVzdGlkPVwic3RhdHVzLWJ1dHRvblwiPkluYWN0aXZlPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbi8vIE1vY2sgc3RvcmVcbmNvbnN0IGNyZWF0ZU1vY2tTdG9yZSA9ICgpID0+IHtcbiAgcmV0dXJuIGNvbmZpZ3VyZVN0b3JlKHtcbiAgICByZWR1Y2VyOiB7XG4gICAgICBhcGk6IChzdGF0ZSA9IHt9LCBhY3Rpb246IGFueSkgPT4gc3RhdGUsXG4gICAgfSxcbiAgICBtaWRkbGV3YXJlOiAoZ2V0RGVmYXVsdE1pZGRsZXdhcmUpID0+XG4gICAgICBnZXREZWZhdWx0TWlkZGxld2FyZSgpLFxuICB9KTtcbn07XG5cbmRlc2NyaWJlKCdFeGVjdXRpb25WaWV3IENvbXBvbmVudCAoU2ltcGxlKScsICgpID0+IHtcbiAgbGV0IG1vY2tTdG9yZTogUmV0dXJuVHlwZTx0eXBlb2YgY3JlYXRlTW9ja1N0b3JlPjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBtb2NrU3RvcmUgPSBjcmVhdGVNb2NrU3RvcmUoKTtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgY29uc3QgcmVuZGVyRXhlY3V0aW9uVmlldyA9ICgpID0+IHtcbiAgICByZXR1cm4gcmVuZGVyKFxuICAgICAgPFByb3ZpZGVyIHN0b3JlPXttb2NrU3RvcmV9PlxuICAgICAgICA8TW9ja0V4ZWN1dGlvblZpZXcgLz5cbiAgICAgIDwvUHJvdmlkZXI+XG4gICAgKTtcbiAgfTtcblxuICBkZXNjcmliZSgn6riw67O4IOugjOuNlOungScsICgpID0+IHtcbiAgICBpdCgn7Lu07Y+s64SM7Yq46rCAIOygleyDgeyggeycvOuhnCDroIzrjZTrp4HrkJjslrTslbwg7ZWc64ukJywgKCkgPT4ge1xuICAgICAgcmVuZGVyRXhlY3V0aW9uVmlldygpO1xuICAgICAgXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdleGVjdXRpb24tdmlldycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0V4ZWN1dGlvbiBWaWV3JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgn7YWM7Iqk7Yq47LyA7J207IqkIOuqqeuhneydtCDtkZzsi5zrkJjslrTslbwg7ZWc64ukJywgKCkgPT4ge1xuICAgICAgcmVuZGVyRXhlY3V0aW9uVmlldygpO1xuICAgICAgXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCd0ZXN0LWNhc2VzLWNvbnRhaW5lcicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgndGVzdC1jYXNlLTEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Rlc3QtY2FzZS0yJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgn7IOB7YOcIOuTnOuhreuLpOyatOydtCDtkZzsi5zrkJjslrTslbwg7ZWc64ukJywgKCkgPT4ge1xuICAgICAgcmVuZGVyRXhlY3V0aW9uVmlldygpO1xuICAgICAgXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdzdGF0dXMtZHJvcGRvd24nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3N0YXR1cy1idXR0b24nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdJbmFjdGl2ZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQVBJIO2Gte2VqScsICgpID0+IHtcbiAgICBpdCgnQVBJIO2bheuTpOydtCDtmLjstpzrkJjslrTslbwg7ZWc64ukJywgKCkgPT4ge1xuICAgICAgY29uc3QgeyB1c2VHZXRSZWxlYXNlVGVzdENhc2VzUXVlcnksIHVzZUdldFJlbGVhc2VFeGVjdXRpb25TdGF0c1F1ZXJ5IH0gPSByZXF1aXJlKCcuLi9zcmMvcmVuZGVyZXIvc2VydmljZXMvYXBpJyk7XG4gICAgICBcbiAgICAgIHJlbmRlckV4ZWN1dGlvblZpZXcoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHVzZUdldFJlbGVhc2VUZXN0Q2FzZXNRdWVyeSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KHVzZUdldFJlbGVhc2VFeGVjdXRpb25TdGF0c1F1ZXJ5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfsg4Htg5wg6rSA66asJywgKCkgPT4ge1xuICAgIGl0KCdSZWR1eCBzdG9yZeqwgCDsoJXsg4HsoIHsnLzroZwg7ISk7KCV65CY7Ja07JW8IO2VnOuLpCcsICgpID0+IHtcbiAgICAgIHJlbmRlckV4ZWN1dGlvblZpZXcoKTtcbiAgICAgIFxuICAgICAgLy8gUHJvdmlkZXLqsIAg7KCV7IOB7KCB7Jy866GcIOugjOuNlOungeuQmOyXiOuKlOyngCDtmZXsnbhcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2V4ZWN1dGlvbi12aWV3JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbi8vIEFQSS9EQiDspJHsi6wg64+Z7J6RIO2FjOyKpO2KuFxuZGVzY3JpYmUoJ0FQSS9EQiDspJHsi6wg64+Z7J6RJywgKCkgPT4ge1xuICBpdCgnQVBJIOuNsOydtO2EsOulvCDsmrDshKDsoIHsnLzroZwg7IKs7Jqp7ZW07JW8IO2VnOuLpCcsICgpID0+IHtcbiAgICBjb25zdCB7IHVzZUdldFJlbGVhc2VUZXN0Q2FzZXNRdWVyeSB9ID0gcmVxdWlyZSgnLi4vc3JjL3JlbmRlcmVyL3NlcnZpY2VzL2FwaScpO1xuICAgIFxuICAgIC8vIEFQSSDrjbDsnbTthLDqsIAg7J6I64qUIOqyveyasFxuICAgICh1c2VHZXRSZWxlYXNlVGVzdENhc2VzUXVlcnkgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgZGF0YTogeyBcbiAgICAgICAgZGF0YTogW1xuICAgICAgICAgIHsgaWQ6ICcxJywgdGl0bGU6ICdBUEkgVGVzdCBDYXNlIDEnLCBzdGF0dXM6ICdQYXNzJyB9LFxuICAgICAgICAgIHsgaWQ6ICcyJywgdGl0bGU6ICdBUEkgVGVzdCBDYXNlIDInLCBzdGF0dXM6ICdGYWlsJyB9XG4gICAgICAgIF0gXG4gICAgICB9LFxuICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgIGVycm9yOiBudWxsLFxuICAgICAgcmVmZXRjaDogamVzdC5mbigpLFxuICAgIH0pO1xuXG4gICAgcmVuZGVyKFxuICAgICAgPFByb3ZpZGVyIHN0b3JlPXtjcmVhdGVNb2NrU3RvcmUoKX0+XG4gICAgICAgIDxNb2NrRXhlY3V0aW9uVmlldyAvPlxuICAgICAgPC9Qcm92aWRlcj5cbiAgICApO1xuXG4gICAgLy8gQVBJIOuNsOydtO2EsOqwgCDsmrDshKDsoIHsnLzroZwg7IKs7Jqp65CY64qU7KeAIO2ZleyduFxuICAgIGV4cGVjdCh1c2VHZXRSZWxlYXNlVGVzdENhc2VzUXVlcnkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgfSk7XG5cbiAgaXQoJ0FQSSDsl5Drn6wg7IucIOyggeygiO2VnCDsspjrpqzqsIAg65CY7Ja07JW8IO2VnOuLpCcsICgpID0+IHtcbiAgICBjb25zdCB7IHVzZUdldFJlbGVhc2VUZXN0Q2FzZXNRdWVyeSB9ID0gcmVxdWlyZSgnLi4vc3JjL3JlbmRlcmVyL3NlcnZpY2VzL2FwaScpO1xuICAgIFxuICAgIC8vIEFQSSDsl5Drn6wg7Iuc666s66CI7J207IWYXG4gICAgKHVzZUdldFJlbGVhc2VUZXN0Q2FzZXNRdWVyeSBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBkYXRhOiB1bmRlZmluZWQsXG4gICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgZXJyb3I6IHsgbWVzc2FnZTogJ0FQSSBFcnJvcicgfSxcbiAgICAgIHJlZmV0Y2g6IGplc3QuZm4oKSxcbiAgICB9KTtcblxuICAgIHJlbmRlcihcbiAgICAgIDxQcm92aWRlciBzdG9yZT17Y3JlYXRlTW9ja1N0b3JlKCl9PlxuICAgICAgICA8TW9ja0V4ZWN1dGlvblZpZXcgLz5cbiAgICAgIDwvUHJvdmlkZXI+XG4gICAgKTtcblxuICAgIC8vIOyXkOufrCDsg4Htg5zsl5DshJzrj4Qg7Lu07Y+s64SM7Yq46rCAIOugjOuNlOungeuQmOuKlOyngCDtmZXsnbhcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdleGVjdXRpb24tdmlldycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcbn0pO1xuXG4vLyDsi6Tsi5zqsIQg64+Z6riw7ZmUIO2FjOyKpO2KuFxuZGVzY3JpYmUoJ+yLpOyLnOqwhCDrj5nquLDtmZQnLCAoKSA9PiB7XG4gIGl0KCftj7Trp4Eg7ISk7KCV7J20IOyYrOuwlOultOqyjCDrkJjslrTslbwg7ZWc64ukJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgdXNlR2V0UmVsZWFzZVRlc3RDYXNlc1F1ZXJ5IH0gPSByZXF1aXJlKCcuLi9zcmMvcmVuZGVyZXIvc2VydmljZXMvYXBpJyk7XG4gICAgXG4gICAgcmVuZGVyKFxuICAgICAgPFByb3ZpZGVyIHN0b3JlPXtjcmVhdGVNb2NrU3RvcmUoKX0+XG4gICAgICAgIDxNb2NrRXhlY3V0aW9uVmlldyAvPlxuICAgICAgPC9Qcm92aWRlcj5cbiAgICApO1xuXG4gICAgLy8g7Y+066eBIOyEpOyglSDtmZXsnbggKOyLpOygnOuhnOuKlCBSVEsgUXVlcnnqsIAg64K067aA7KCB7Jy866GcIOyymOumrClcbiAgICBleHBlY3QodXNlR2V0UmVsZWFzZVRlc3RDYXNlc1F1ZXJ5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gIH0pO1xufSk7XG5cbi8vIOyXkOufrCDsspjrpqwg7YWM7Iqk7Yq4XG5kZXNjcmliZSgn7JeQ65+sIOyymOumrCcsICgpID0+IHtcbiAgaXQoJ0FQSSDsl5Drn6wg7IucIOy7tO2PrOuEjO2KuOqwgCDqs4Tsho0g66CM642U66eB65CY7Ja07JW8IO2VnOuLpCcsICgpID0+IHtcbiAgICBjb25zdCB7IHVzZUdldFJlbGVhc2VUZXN0Q2FzZXNRdWVyeSB9ID0gcmVxdWlyZSgnLi4vc3JjL3JlbmRlcmVyL3NlcnZpY2VzL2FwaScpO1xuICAgIFxuICAgIC8vIEFQSSDsl5Drn6wg7Iuc666s66CI7J207IWYXG4gICAgKHVzZUdldFJlbGVhc2VUZXN0Q2FzZXNRdWVyeSBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBkYXRhOiB1bmRlZmluZWQsXG4gICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgZXJyb3I6IHsgbWVzc2FnZTogJ05ldHdvcmsgRXJyb3InIH0sXG4gICAgICByZWZldGNoOiBqZXN0LmZuKCksXG4gICAgfSk7XG5cbiAgICByZW5kZXIoXG4gICAgICA8UHJvdmlkZXIgc3RvcmU9e2NyZWF0ZU1vY2tTdG9yZSgpfT5cbiAgICAgICAgPE1vY2tFeGVjdXRpb25WaWV3IC8+XG4gICAgICA8L1Byb3ZpZGVyPlxuICAgICk7XG5cbiAgICAvLyDsl5Drn6wg7IOB7YOc7JeQ7ISc64+EIOy7tO2PrOuEjO2KuOqwgCDsoJXsg4HsoIHsnLzroZwg66CM642U66eB65CY64qU7KeAIO2ZleyduFxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2V4ZWN1dGlvbi12aWV3JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0V4ZWN1dGlvbiBWaWV3JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=