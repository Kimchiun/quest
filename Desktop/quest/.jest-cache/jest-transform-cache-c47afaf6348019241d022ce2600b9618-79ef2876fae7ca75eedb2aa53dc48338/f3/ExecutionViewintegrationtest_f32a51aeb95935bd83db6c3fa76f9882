02b6082bd0218d1c970b78bcc36c0d80
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("@testing-library/react");
const react_redux_1 = require("react-redux");
const toolkit_1 = require("@reduxjs/toolkit");
const api_1 = require("../src/renderer/services/api");
// 실제 ExecutionView 컴포넌트 임포트
const ExecutionView_1 = __importDefault(require("../src/renderer/features/ReleaseManagementV2/components/ExecutionView"));
// Mock store
const createMockStore = () => {
    return (0, toolkit_1.configureStore)({
        reducer: {
            [api_1.api.reducerPath]: api_1.api.reducer,
        },
        middleware: (getDefaultMiddleware) => getDefaultMiddleware().concat(api_1.api.middleware),
    });
};
// Mock props
const mockRelease = {
    id: 'test-release-id',
    name: 'Test Release',
    version: '1.0.0',
    owner: 'admin',
    createdAt: '2024-01-01T00:00:00Z'
};
const mockTestCases = [
    {
        id: '81',
        name: 'Test Case 1',
        title: 'Test Case 1',
        description: 'Test description 1',
        status: 'Inactive',
        priority: 'High',
        steps: ['Step 1', 'Step 2'],
        expected: 'Expected result 1',
        lastUpdated: '2024-01-01T00:00:00Z',
        tags: ['test'],
        createdBy: 'admin',
        createdAt: '2024-01-01T00:00:00Z',
        updatedAt: '2024-01-01T00:00:00Z'
    }
];
// Mock callbacks
const mockOnTestCaseUpdate = jest.fn();
const mockOnBulkUpdate = jest.fn();
const mockOnAddTestCases = jest.fn();
const mockOnTestCasesLoad = jest.fn();
describe('ExecutionView Integration Test', () => {
    let mockStore;
    beforeEach(() => {
        mockStore = createMockStore();
        jest.clearAllMocks();
    });
    const renderExecutionView = () => {
        return (0, react_1.render)((0, jsx_runtime_1.jsx)(react_redux_1.Provider, { store: mockStore, children: (0, jsx_runtime_1.jsx)(ExecutionView_1.default, { release: mockRelease, testCases: mockTestCases, onTestCaseUpdate: mockOnTestCaseUpdate, onBulkUpdate: mockOnBulkUpdate, onAddTestCases: mockOnAddTestCases, onTestCasesLoad: mockOnTestCasesLoad }) }));
    };
    describe('실제 컴포넌트 렌더링', () => {
        it('실제 ExecutionView 컴포넌트가 렌더링되어야 한다', async () => {
            renderExecutionView();
            // 컴포넌트가 렌더링되는지 확인
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByText('Test Release')).toBeInTheDocument();
            });
        });
        it('테스트케이스 정보가 표시되어야 한다', async () => {
            renderExecutionView();
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByText('Test Case 1')).toBeInTheDocument();
            });
        });
    });
    describe('API 통합 테스트', () => {
        it('API 훅들이 실제로 호출되어야 한다', async () => {
            renderExecutionView();
            // API 훅들이 호출되는지 확인 (실제 RTK Query 사용)
            await (0, react_1.waitFor)(() => {
                // 컴포넌트가 정상적으로 렌더링되었는지 확인
                expect(react_1.screen.getByText('Test Release')).toBeInTheDocument();
            });
        });
    });
    describe('상태 관리 테스트', () => {
        it('Redux store와 정상적으로 연동되어야 한다', async () => {
            renderExecutionView();
            await (0, react_1.waitFor)(() => {
                // Redux store가 정상적으로 작동하는지 확인
                expect(react_1.screen.getByText('Test Release')).toBeInTheDocument();
            });
        });
    });
    describe('사용자 인터랙션 테스트', () => {
        it('테스트케이스를 클릭할 수 있어야 한다', async () => {
            renderExecutionView();
            await (0, react_1.waitFor)(() => {
                const testCaseElement = react_1.screen.getByText('Test Case 1');
                expect(testCaseElement).toBeInTheDocument();
                // 테스트케이스 클릭 시뮬레이션
                react_1.fireEvent.click(testCaseElement);
            });
        });
    });
    describe('에러 처리 테스트', () => {
        it('API 에러 시에도 컴포넌트가 렌더링되어야 한다', async () => {
            // 에러 상황에서도 컴포넌트가 렌더링되는지 확인
            renderExecutionView();
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByText('Test Release')).toBeInTheDocument();
            });
        });
    });
});
// API/DB 중심 동작 통합 테스트
describe('API/DB 중심 동작 통합 테스트', () => {
    let mockStore;
    beforeEach(() => {
        mockStore = createMockStore();
        jest.clearAllMocks();
    });
    it('실제 API 데이터를 사용하여 렌더링되어야 한다', async () => {
        const { getByText } = (0, react_1.render)((0, jsx_runtime_1.jsx)(react_redux_1.Provider, { store: mockStore, children: (0, jsx_runtime_1.jsx)(ExecutionView_1.default, { release: mockRelease, testCases: mockTestCases, onTestCaseUpdate: mockOnTestCaseUpdate, onBulkUpdate: mockOnBulkUpdate, onAddTestCases: mockOnAddTestCases, onTestCasesLoad: mockOnTestCasesLoad }) }));
        await (0, react_1.waitFor)(() => {
            expect(getByText('Test Release')).toBeInTheDocument();
        });
    });
    it('실시간 동기화가 작동해야 한다', async () => {
        (0, react_1.render)((0, jsx_runtime_1.jsx)(react_redux_1.Provider, { store: mockStore, children: (0, jsx_runtime_1.jsx)(ExecutionView_1.default, { release: mockRelease, testCases: mockTestCases, onTestCaseUpdate: mockOnTestCaseUpdate, onBulkUpdate: mockOnBulkUpdate, onAddTestCases: mockOnAddTestCases, onTestCasesLoad: mockOnTestCasesLoad }) }));
        // 실시간 동기화가 작동하는지 확인 (컴포넌트가 정상 렌더링)
        await (0, react_1.waitFor)(() => {
            expect(react_1.screen.getByText('Test Release')).toBeInTheDocument();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzLzNpLWExLTIwMjEtMDE3L0RvY3VtZW50cy9xdWVzdC9EZXNrdG9wL3F1ZXN0L3Rlc3RzL0V4ZWN1dGlvblZpZXcuaW50ZWdyYXRpb24udGVzdC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0Esa0RBQTRFO0FBQzVFLDZDQUF1QztBQUN2Qyw4Q0FBa0Q7QUFDbEQsc0RBQW1EO0FBRW5ELDRCQUE0QjtBQUM1QiwwSEFBa0c7QUFFbEcsYUFBYTtBQUNiLE1BQU0sZUFBZSxHQUFHLEdBQUcsRUFBRTtJQUMzQixPQUFPLElBQUEsd0JBQWMsRUFBQztRQUNwQixPQUFPLEVBQUU7WUFDUCxDQUFDLFNBQUcsQ0FBQyxXQUFXLENBQUMsRUFBRSxTQUFHLENBQUMsT0FBTztTQUMvQjtRQUNELFVBQVUsRUFBRSxDQUFDLG9CQUFvQixFQUFFLEVBQUUsQ0FDbkMsb0JBQW9CLEVBQUUsQ0FBQyxNQUFNLENBQUMsU0FBRyxDQUFDLFVBQVUsQ0FBQztLQUNoRCxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUM7QUFFRixhQUFhO0FBQ2IsTUFBTSxXQUFXLEdBQUc7SUFDbEIsRUFBRSxFQUFFLGlCQUFpQjtJQUNyQixJQUFJLEVBQUUsY0FBYztJQUNwQixPQUFPLEVBQUUsT0FBTztJQUNoQixLQUFLLEVBQUUsT0FBTztJQUNkLFNBQVMsRUFBRSxzQkFBc0I7Q0FDbEMsQ0FBQztBQUVGLE1BQU0sYUFBYSxHQUFHO0lBQ3BCO1FBQ0UsRUFBRSxFQUFFLElBQUk7UUFDUixJQUFJLEVBQUUsYUFBYTtRQUNuQixLQUFLLEVBQUUsYUFBYTtRQUNwQixXQUFXLEVBQUUsb0JBQW9CO1FBQ2pDLE1BQU0sRUFBRSxVQUFtQjtRQUMzQixRQUFRLEVBQUUsTUFBZTtRQUN6QixLQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDO1FBQzNCLFFBQVEsRUFBRSxtQkFBbUI7UUFDN0IsV0FBVyxFQUFFLHNCQUFzQjtRQUNuQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLENBQUM7UUFDZCxTQUFTLEVBQUUsT0FBTztR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dWVzdC90ZXN0cy9FeGVjdXRpb25WaWV3LmludGVncmF0aW9uLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50LCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyBQcm92aWRlciB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCB7IGNvbmZpZ3VyZVN0b3JlIH0gZnJvbSAnQHJlZHV4anMvdG9vbGtpdCc7XG5pbXBvcnQgeyBhcGkgfSBmcm9tICcuLi9zcmMvcmVuZGVyZXIvc2VydmljZXMvYXBpJztcblxuLy8g7Iuk7KCcIEV4ZWN1dGlvblZpZXcg7Lu07Y+s64SM7Yq4IOyehO2PrO2KuFxuaW1wb3J0IEV4ZWN1dGlvblZpZXcgZnJvbSAnLi4vc3JjL3JlbmRlcmVyL2ZlYXR1cmVzL1JlbGVhc2VNYW5hZ2VtZW50VjIvY29tcG9uZW50cy9FeGVjdXRpb25WaWV3JztcblxuLy8gTW9jayBzdG9yZVxuY29uc3QgY3JlYXRlTW9ja1N0b3JlID0gKCkgPT4ge1xuICByZXR1cm4gY29uZmlndXJlU3RvcmUoe1xuICAgIHJlZHVjZXI6IHtcbiAgICAgIFthcGkucmVkdWNlclBhdGhdOiBhcGkucmVkdWNlcixcbiAgICB9LFxuICAgIG1pZGRsZXdhcmU6IChnZXREZWZhdWx0TWlkZGxld2FyZSkgPT5cbiAgICAgIGdldERlZmF1bHRNaWRkbGV3YXJlKCkuY29uY2F0KGFwaS5taWRkbGV3YXJlKSxcbiAgfSk7XG59O1xuXG4vLyBNb2NrIHByb3BzXG5jb25zdCBtb2NrUmVsZWFzZSA9IHtcbiAgaWQ6ICd0ZXN0LXJlbGVhc2UtaWQnLFxuICBuYW1lOiAnVGVzdCBSZWxlYXNlJyxcbiAgdmVyc2lvbjogJzEuMC4wJyxcbiAgb3duZXI6ICdhZG1pbicsXG4gIGNyZWF0ZWRBdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJ1xufTtcblxuY29uc3QgbW9ja1Rlc3RDYXNlcyA9IFtcbiAge1xuICAgIGlkOiAnODEnLFxuICAgIG5hbWU6ICdUZXN0IENhc2UgMScsXG4gICAgdGl0bGU6ICdUZXN0IENhc2UgMScsXG4gICAgZGVzY3JpcHRpb246ICdUZXN0IGRlc2NyaXB0aW9uIDEnLFxuICAgIHN0YXR1czogJ0luYWN0aXZlJyBhcyBjb25zdCxcbiAgICBwcmlvcml0eTogJ0hpZ2gnIGFzIGNvbnN0LFxuICAgIHN0ZXBzOiBbJ1N0ZXAgMScsICdTdGVwIDInXSxcbiAgICBleHBlY3RlZDogJ0V4cGVjdGVkIHJlc3VsdCAxJyxcbiAgICBsYXN0VXBkYXRlZDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICB0YWdzOiBbJ3Rlc3QnXSxcbiAgICBjcmVhdGVkQnk6ICdhZG1pbicsXG4gICAgY3JlYXRlZEF0OiAnMjAyNC0wMS0wMVQwMDowMDowMFonLFxuICAgIHVwZGF0ZWRBdDogJzIwMjQtMDEtMDFUMDA6MDA6MDBaJ1xuICB9XG5dO1xuXG4vLyBNb2NrIGNhbGxiYWNrc1xuY29uc3QgbW9ja09uVGVzdENhc2VVcGRhdGUgPSBqZXN0LmZuKCk7XG5jb25zdCBtb2NrT25CdWxrVXBkYXRlID0gamVzdC5mbigpO1xuY29uc3QgbW9ja09uQWRkVGVzdENhc2VzID0gamVzdC5mbigpO1xuY29uc3QgbW9ja09uVGVzdENhc2VzTG9hZCA9IGplc3QuZm4oKTtcblxuZGVzY3JpYmUoJ0V4ZWN1dGlvblZpZXcgSW50ZWdyYXRpb24gVGVzdCcsICgpID0+IHtcbiAgbGV0IG1vY2tTdG9yZTogUmV0dXJuVHlwZTx0eXBlb2YgY3JlYXRlTW9ja1N0b3JlPjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBtb2NrU3RvcmUgPSBjcmVhdGVNb2NrU3RvcmUoKTtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgY29uc3QgcmVuZGVyRXhlY3V0aW9uVmlldyA9ICgpID0+IHtcbiAgICByZXR1cm4gcmVuZGVyKFxuICAgICAgPFByb3ZpZGVyIHN0b3JlPXttb2NrU3RvcmV9PlxuICAgICAgICA8RXhlY3V0aW9uVmlld1xuICAgICAgICAgIHJlbGVhc2U9e21vY2tSZWxlYXNlfVxuICAgICAgICAgIHRlc3RDYXNlcz17bW9ja1Rlc3RDYXNlc31cbiAgICAgICAgICBvblRlc3RDYXNlVXBkYXRlPXttb2NrT25UZXN0Q2FzZVVwZGF0ZX1cbiAgICAgICAgICBvbkJ1bGtVcGRhdGU9e21vY2tPbkJ1bGtVcGRhdGV9XG4gICAgICAgICAgb25BZGRUZXN0Q2FzZXM9e21vY2tPbkFkZFRlc3RDYXNlc31cbiAgICAgICAgICBvblRlc3RDYXNlc0xvYWQ9e21vY2tPblRlc3RDYXNlc0xvYWR9XG4gICAgICAgIC8+XG4gICAgICA8L1Byb3ZpZGVyPlxuICAgICk7XG4gIH07XG5cbiAgZGVzY3JpYmUoJ+yLpOygnCDsu7Ttj6zrhIztirgg66CM642U66eBJywgKCkgPT4ge1xuICAgIGl0KCfsi6TsoJwgRXhlY3V0aW9uVmlldyDsu7Ttj6zrhIztirjqsIAg66CM642U66eB65CY7Ja07JW8IO2VnOuLpCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlckV4ZWN1dGlvblZpZXcoKTtcbiAgICAgIFxuICAgICAgLy8g7Lu07Y+s64SM7Yq46rCAIOugjOuNlOungeuQmOuKlOyngCDtmZXsnbhcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVGVzdCBSZWxlYXNlJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCfthYzsiqTtirjsvIDsnbTsiqQg7KCV67O06rCAIO2RnOyLnOuQmOyWtOyVvCDtlZzri6QnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXJFeGVjdXRpb25WaWV3KCk7XG4gICAgICBcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVGVzdCBDYXNlIDEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQVBJIO2Gte2VqSDthYzsiqTtirgnLCAoKSA9PiB7XG4gICAgaXQoJ0FQSSDtm4Xrk6TsnbQg7Iuk7KCc66GcIO2YuOy2nOuQmOyWtOyVvCDtlZzri6QnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXJFeGVjdXRpb25WaWV3KCk7XG4gICAgICBcbiAgICAgIC8vIEFQSSDtm4Xrk6TsnbQg7Zi47Lac65CY64qU7KeAIO2ZleyduCAo7Iuk7KCcIFJUSyBRdWVyeSDsgqzsmqkpXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgLy8g7Lu07Y+s64SM7Yq46rCAIOygleyDgeyggeycvOuhnCDroIzrjZTrp4HrkJjsl4jripTsp4Ag7ZmV7J24XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdUZXN0IFJlbGVhc2UnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn7IOB7YOcIOq0gOumrCDthYzsiqTtirgnLCAoKSA9PiB7XG4gICAgaXQoJ1JlZHV4IHN0b3Jl7JmAIOygleyDgeyggeycvOuhnCDsl7Drj5nrkJjslrTslbwg7ZWc64ukJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyRXhlY3V0aW9uVmlldygpO1xuICAgICAgXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgLy8gUmVkdXggc3RvcmXqsIAg7KCV7IOB7KCB7Jy866GcIOyekeuPme2VmOuKlOyngCDtmZXsnbhcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1Rlc3QgUmVsZWFzZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfsgqzsmqnsnpAg7J247YSw656Z7IWYIO2FjOyKpO2KuCcsICgpID0+IHtcbiAgICBpdCgn7YWM7Iqk7Yq47LyA7J207Iqk66W8IO2BtOumre2VoCDsiJgg7J6I7Ja07JW8IO2VnOuLpCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlckV4ZWN1dGlvblZpZXcoKTtcbiAgICAgIFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRlc3RDYXNlRWxlbWVudCA9IHNjcmVlbi5nZXRCeVRleHQoJ1Rlc3QgQ2FzZSAxJyk7XG4gICAgICAgIGV4cGVjdCh0ZXN0Q2FzZUVsZW1lbnQpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIFxuICAgICAgICAvLyDthYzsiqTtirjsvIDsnbTsiqQg7YG066atIOyLnOuurOugiOydtOyFmFxuICAgICAgICBmaXJlRXZlbnQuY2xpY2sodGVzdENhc2VFbGVtZW50KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn7JeQ65+sIOyymOumrCDthYzsiqTtirgnLCAoKSA9PiB7XG4gICAgaXQoJ0FQSSDsl5Drn6wg7Iuc7JeQ64+EIOy7tO2PrOuEjO2KuOqwgCDroIzrjZTrp4HrkJjslrTslbwg7ZWc64ukJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8g7JeQ65+sIOyDge2ZqeyXkOyEnOuPhCDsu7Ttj6zrhIztirjqsIAg66CM642U66eB65CY64qU7KeAIO2ZleyduFxuICAgICAgcmVuZGVyRXhlY3V0aW9uVmlldygpO1xuICAgICAgXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1Rlc3QgUmVsZWFzZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbi8vIEFQSS9EQiDspJHsi6wg64+Z7J6RIO2Gte2VqSDthYzsiqTtirhcbmRlc2NyaWJlKCdBUEkvREIg7KSR7IusIOuPmeyekSDthrXtlakg7YWM7Iqk7Yq4JywgKCkgPT4ge1xuICBsZXQgbW9ja1N0b3JlOiBSZXR1cm5UeXBlPHR5cGVvZiBjcmVhdGVNb2NrU3RvcmU+O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIG1vY2tTdG9yZSA9IGNyZWF0ZU1vY2tTdG9yZSgpO1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBpdCgn7Iuk7KCcIEFQSSDrjbDsnbTthLDrpbwg7IKs7Jqp7ZWY7JesIOugjOuNlOungeuQmOyWtOyVvCDtlZzri6QnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyBnZXRCeVRleHQgfSA9IHJlbmRlcihcbiAgICAgIDxQcm92aWRlciBzdG9yZT17bW9ja1N0b3JlfT5cbiAgICAgICAgPEV4ZWN1dGlvblZpZXdcbiAgICAgICAgICByZWxlYXNlPXttb2NrUmVsZWFzZX1cbiAgICAgICAgICB0ZXN0Q2FzZXM9e21vY2tUZXN0Q2FzZXN9XG4gICAgICAgICAgb25UZXN0Q2FzZVVwZGF0ZT17bW9ja09uVGVzdENhc2VVcGRhdGV9XG4gICAgICAgICAgb25CdWxrVXBkYXRlPXttb2NrT25CdWxrVXBkYXRlfVxuICAgICAgICAgIG9uQWRkVGVzdENhc2VzPXttb2NrT25BZGRUZXN0Q2FzZXN9XG4gICAgICAgICAgb25UZXN0Q2FzZXNMb2FkPXttb2NrT25UZXN0Q2FzZXNMb2FkfVxuICAgICAgICAvPlxuICAgICAgPC9Qcm92aWRlcj5cbiAgICApO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3QoZ2V0QnlUZXh0KCdUZXN0IFJlbGVhc2UnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ+yLpOyLnOqwhCDrj5nquLDtmZTqsIAg7J6R64+Z7ZW07JW8IO2VnOuLpCcsIGFzeW5jICgpID0+IHtcbiAgICByZW5kZXIoXG4gICAgICA8UHJvdmlkZXIgc3RvcmU9e21vY2tTdG9yZX0+XG4gICAgICAgIDxFeGVjdXRpb25WaWV3XG4gICAgICAgICAgcmVsZWFzZT17bW9ja1JlbGVhc2V9XG4gICAgICAgICAgdGVzdENhc2VzPXttb2NrVGVzdENhc2VzfVxuICAgICAgICAgIG9uVGVzdENhc2VVcGRhdGU9e21vY2tPblRlc3RDYXNlVXBkYXRlfVxuICAgICAgICAgIG9uQnVsa1VwZGF0ZT17bW9ja09uQnVsa1VwZGF0ZX1cbiAgICAgICAgICBvbkFkZFRlc3RDYXNlcz17bW9ja09uQWRkVGVzdENhc2VzfVxuICAgICAgICAgIG9uVGVzdENhc2VzTG9hZD17bW9ja09uVGVzdENhc2VzTG9hZH1cbiAgICAgICAgLz5cbiAgICAgIDwvUHJvdmlkZXI+XG4gICAgKTtcblxuICAgIC8vIOyLpOyLnOqwhCDrj5nquLDtmZTqsIAg7J6R64+Z7ZWY64qU7KeAIO2ZleyduCAo7Lu07Y+s64SM7Yq46rCAIOygleyDgSDroIzrjZTrp4EpXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVGVzdCBSZWxlYXNlJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=